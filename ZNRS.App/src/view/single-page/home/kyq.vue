<style scoped  lang="less">

.znkyq{
   
    position: relative;
    background-color: #f0f0f0;
    width: 100%;
    display: block;
    overflow: hidden;
    position: relative;

    .svg{
      height: auto;
      background-color: #fff;
      float: left;
      width: 100%;
      border: 1px solid #ddd;
      position: relative;
      overflow: hidden;


      .tooltipar{
        padding: 10px;
        padding-left: 23px;
        position:absolute;
        left: -200px;
        top: 0px;
        width: 200px;
        border: 2px solid #fff;
        background-color: #000;
        color: #fff;
        text-align: left;
        font-size: 16px;
        // min-height: 38px;
        line-height: 20px;
        z-index: 9990;
        border-radius: 6px;
      }
      .logo{
        position:absolute;
        top: 10px;
        z-index: 999;

        
        width: 160px;
        text-align: center;
        height: 30px;
        color:#fff;
        .time{
          margin-left:10px;font-size:13px;
        }
        .drop{
          height:30px;line-height:30px;font-size:15px;
        }
        .ivu-dropdown-rel{
          a,a:hover{
            color:#fff ;
          }
        }
        
        img{
          height: 100%;
          vertical-align:middle;
        }
      }

      .logo2{
        position:absolute;
        top: 50px;
        z-index: 999;
        width: 200px;
        text-align: left;
        height: 90px;
        color:#fff;
        border:1px solid #fff;
        border-radius: 6px;
        opacity: 0.9;
        .item{
          width:100%;
          height: 30px;
          line-height: 30px;
          color:#fff;
          text-align: left;
          font-size: 13px;
        }
      }
      .allp{
        width: 100%;
        height: 100%;
        position:absolute;
        top: 0px;
        left: 0px;
      }
      .liumian{
        position:absolute;
        top: 20px;
        left: 1px;
        width: 205px;
        height: auto;
        z-index: 999;
      }
     
      .loading{
        position:absolute;
        top:0px;
        left: 0px;
        width: 100%;
        height: 100%;
        z-index: 1800;
        background-color: #000000;
        opacity: 0.7;
        img{
          width: 130px;
          margin: 300px auto;;
        }
      }


      .queue1{
        position:absolute;
        top:70px;
        left: 0px;
        width: 350px;
        height: 620px;
        z-index: 1000;
        background:transparent;
        
        opacity: 0.9;
        .warn{
          padding-top: 8px;
          padding-bottom: 6px;
          padding-left: 10px;
                  min-height: 40px;
                  line-height: 26px;
                  color: red;
                  min-width: 200px;
                  text-align: left;
                  border: 1px solid red;
                  border-radius: 5px;
                  position: absolute;
                  left: 330px;
                  top: 0px;
                  background-color: white;
                  font-size: 15px;
                  font-weight: bold;
                  font-family: '微软雅黑';
                  z-index: 9998;
                  opacity: 0.9;
                  img{
                    position:absolute;
                    left:-22px;
                    top:6px;
                    width:30px;
                    height:30px;
                  }
            }
        .yqc{
          top:78px;
        }
        .lfl{
          top:118px;
        }
        .btn{
          width: 33px;
          height: 106px;
          position:absolute;
          right: 2px;
          z-index: 999;
          top:228px;
          cursor: pointer;
          border-top-right-radius: 10px;
          border-bottom-right-radius: 10px;
          border-top: 2px solid #666;
          border-bottom: 2px solid #666;
          border-right: 2px solid #666;
          img{
            transform: rotateY(180deg);
          }
          .wenzi{
            position:absolute;
            left: 9px;
            width: 18px;
            top:25px;
            height: 70px;
            color:#000;
            font-size: 15px;
            font-family: '微软雅黑';
            line-height: 18px;
            font-weight: bold;
          }
        }
        .q{
          position:absolute;
          top:0px;
          left: 0px;
          width:318px;
          height: 620px;
          background-color: #fff;
          border-top-right-radius: 10px;
          border-bottom-right-radius: 10px;
          border-top: 2px solid #666;
          border-bottom: 2px solid #666;
          border-right: 2px solid #666;
          color:#000;
          font-size: 13px;
          font-family: '微软雅黑';
          line-height: 18px;
          .tab{
            
            .ontime{
              width: 100%;
              height: 566px;
              background-color: #fff;
              margin-top: -16px;
              .splid{
                width:90%;
                margin:0px auto;
                border-top:1px solid #555;
                height: 0px;
                border-left:0px;
                border-right:0px;
                border-bottom:0px;
              }
              .itemr{
                width: 100%;
                height: 283px;
                position: relative;
              }
              .item{
                border-bottom: 1px solid #ddd;
                width: 80%;
                height: 40px;
                line-height: 40px;
                margin: 0px auto;
                font-size: 14px;
                color: #222;
                position: relative;
                .huikan{
                  position: absolute;
                  top: 9px;
                  left: -28px;
                  width: 22px;
                  height: 22px;
                  line-height: 18px;
                  border: 1px solid #999;
                  background-color: #eef;
                  cursor: pointer;
                  border-radius: 5px;
                  padding-bottom: 8px;
                  padding-left: 2px;
                  
                }
                .iteml{
                  width: 70%;
                  height: 40px;
                  line-height: 40px;
                  float: left;
                }
                .itemr{
                  width: 30%;
                  height: 40px;
                  line-height: 40px;
                  float: left;
                  text-align: center;
                  position: relative;
                  img{
                    position:absolute;
                    right: -16px;
                    width: 38px;
                    height: 38px;
                    float: right;
                  }
                }
              }
            }
          }
          
            
          
        }
      }

      .viewway{
        position:absolute;
        top: 15px;
        width: 300px;
        height: 30px;
        background-color: #fff;
        z-index: 899;
        border: 1px solid #ddd;
        display:none;
        .t1{
          position: relative;
          width: 50%;
          float: left;
          height: 30px;
          line-height: 30px;
          font-size: 16px;
          text-align: center;
          cursor: pointer;
          img{
            position:absolute;
            top: 0px;
            left: 0px;
            width: 25px;
            height: 25px;
          }
        }
        .c{
          background-color: dodgerblue;
          color:#fff;
          height: 28px;
        }
      }

      .viewway2{
        position:absolute;
        top: 12px;
        width: 36px;
        height: 36px;
        background-color: #fff;
        z-index: 899;
        border: 1px solid #ddd;
        border-radius: 3px;
        .l{
          width: 34px;
          height: 34px;
          text-align: center;
          cursor: pointer;
        }
        .p0{
          position:absolute;
          top: 0px;
          left: 30px;
          width: 180px;
          height: 36px;
          line-height: 36px;
          text-align: center;
          color: #fff;
          display:block;
          z-index: 900;
          font-size: 18px;
        }
        .w{
          position:absolute;
          top: 0px;
          left: 200px;
          width: 34px;
          height: 34px;
          text-align: center;
          cursor: pointer;
        }
      }
      .viewway2:hover{
        position:absolute;
        top: 12px;
        width: 36px;
        height: 36px;
        background-color: #fff;
        z-index: 899;
        border: 1px solid #ddd;
        border-radius: 3px;
        .l{
          width: 30px;
          height: 30px;
          margin: 2px;
          text-align: center;
          cursor: pointer;

        }
        
      }
      .queue{
        position:absolute;
        right: 0px;
        width: 350px;
        top:70px;
        height: 620px;

        z-index: 1000;
        background:transparent;
        opacity: 0.9;
        .btn{
          width: 32px;
          height: 106px;
          position:absolute;
          left: 2px;
          z-index: 999;
          top:228px;
          cursor: pointer;
          border-top-left-radius: 10px;
          border-bottom-left-radius: 10px;
          border-top: 2px solid #666;
          border-bottom: 2px solid #666;
          border-left: 2px solid #666;
          .wenzi{
            position:absolute;
            left: 9px;
            width: 18px;
            top:25px;
            height: 70px;
            color:#000;
            font-size: 15px;
            font-family: '微软雅黑';
            line-height: 18px;
            font-weight: bold;
           
          }
        }
        .q{
          position:absolute;
          top:0px;
          right: 0px;
          width:318px;
          height: 620px;
          background-color: #fff;
          border-top-left-radius: 10px;
          border-bottom-left-radius: 10px;
          border-top: 2px solid #666;
          border-bottom: 2px solid #666;
          border-left: 2px solid #666;
          color:#000;
          font-size: 13px;
          font-family: '微软雅黑';
          .ontime{
              width: 100%;
              background-color: #fff;
              // margin-top: -16px;
              border-top-left-radius: 10px;
              border-bottom-left-radius: 10px;
              height: 620px;
              .item{
                width: 96%;
                height: 60px;
                margin: 3px auto;
                font-size: 14px;
                color: #222;
                position: relative;
                .yyy{
                  position: absolute;
                  left: 29px;
                  top:3px;
                  width:50px;
                  height: 50px;
                  background-color: #fff;
                  border: 0px;
                  border-radius: 50%;
                  .im{
                    position: absolute;
                    border-radius: 50%;
                    left: 0px;
                    top : 0px;
                    width:50px;
                    height: 50px;
                  }
                  .yy{
                    position: absolute;
                    border-radius: 50%;
                    left: 10px;
                    top:10px;
                    width:30px;
                    height: 30px;
                    background-color: #007373;
                    z-index: 100;
                    line-height: 30px;
                    color: #fff;
                    font-weight: bold;
                  }
                  .io{
                    position: absolute;
                    border-radius: 50%;
                    left: 0px;
                    top:0px;
                    width:50px;
                    height: 50px;
                    z-index: 99;
                  }
                  .y{
                    position: absolute;
                    border-radius: 50%;
                    width:7px;
                    height: 7px;
                    background-color: #333;
                    border: 0px;
                  }
                  
                }
                .zi{
                  background-color: #fff;
                  width: 100%;
                  height: 60px;
                  line-height: 40px;
                  font-size: 18px;
                  p{
                    background-color: #fff;
                    font-size: 13px;
                    line-height: 16px;
                    img{
                      margin-top: -6px;
                      width: 20px;
                      height: 20px;
                    }
                  }
                }
              }
              
              
            }
        }
      }
    }

    
    
   
}



</style>
<template>
<div class="znkyq">
  <!-- 转子硫酸氢氨沉积开始  -->
  <Modal v-model="lsqa.opened" width="860" class-name="tyutyuytu7" :mask-closable="false">
        <p slot="header" >
          {{kyqnow}}空预器_转子硫酸氢氨沉积
        </p>
        <div  class="jcgk">
            <div class="l" >
              <div class="zi th"  :style="{bottom:(500)+'px'}">{{lsqa.th}}℃</div> 
              <div class="zi td"  :style="{bottom:(250)+'px'}">{{lsqa.td}}℃</div> 
              <div class="zi tc"  :style="{bottom:(0)+'px'}">{{lsqa.tc}}℃</div> 
              

              <div class="re"  :style="{width:(3)+'px',left:'-136px'}">热端元件</div>
              <div class="re1"  :style="{width:(3)+'px',left:'-136px'}">冷端元件</div>

              <div class="u"  :style="{width:(3)+'px',left:'-136px'}"></div>
              <div class="d"  :style="{width:(3)+'px',left:'-136px'}"></div>
              
              <div class="u" ></div> 
              <div class="d" ></div> 
              <div   :class="[{ active: cjworn==1 }, 'z' ]"   :style="{top:(cjtop)+'px',height:(cjheight)+'px',lineHeight:(cjheight)+'px'}"> 沉 积 区 域 </div> 
              <div class="zi1 high"  :style="{top:(cjtop-15)+'px'}">{{lsqa.t1}}℃</div> 
              <div class="zi1 low"  :style="{top:(cjtop+cjheight-15)+'px'}">{{lsqa.t2}}℃</div> 
              <div class="x" ></div> 
            </div> 
        </div>
        <div slot="footer" style="height:0px">
        </div>
  </Modal>
  <!-- 转子硫酸氢氨沉积结束  -->


  <!-- 回看开始  -->
  <Modal v-model="huikan.modal2" width="1100" class-name="vertical-center-modal" :mask-closable="false">
        <p slot="header" >
          {{huikan.title}}
          <Button type="warning" @click="hqkdate(2)" style="width: 80px;position:absolute;right:470px;top:8px">前天</Button>
          <Button type="success" @click="hqkdate(1)" style="width: 80px;position:absolute;right:380px;top:8px">昨天</Button>
          <DatePicker type="datetimerange" v-model="huikan.timebe"  @on-change="haldleBackData" format="yyyy-MM-dd HH:mm" placeholder="选择时间段" style="width: 320px;position:absolute;right:50px;top:8px"></DatePicker>
        </p>
        <div style="text-align:center">
            <v-chart :options="huikan.data" autoresize  style="width:100%"></v-chart>

        </div>
        <div slot="footer">
            
        </div>
  </Modal>
  <!-- 回看结束  -->


  <div id="svg" class="svg" :style="{height:h2+'px',width:(w2-10)+'px'}">
    
    <div class="tooltipar"  v-html="ttt"></div>
    <div  class="loading" id="pload">
      <center>
      <img :src="publicPath+'loading.gif'" />
      </center>
    </div>

    <div class="logo2"   :style="{left:(w2-10-200)/2+'px'}">
      <div class="item"><icon size="20" type="ios-videocam" style="color:#fff"></icon>&nbsp;转速探头1(rpm) : {{zsclip[0]}} <span v-if="zsindex==1 " style="color:red">(偏离)</span></div>
      <div class="item"><icon size="20" type="ios-videocam" style="color:#fff"></icon>&nbsp;转速探头2(rpm) : {{zsclip[1]}} <span v-if="zsindex==2 " style="color:red">(偏离)</span></div>
      <div class="item"><icon size="20" type="ios-videocam" style="color:#fff"></icon>&nbsp;转速探头3(rpm) : {{zsclip[2]}} <span v-if="zsindex==3 " style="color:red">(偏离)</span></div>
    </div>

    <div class="logo" id="logo"  :style="{left:(w2-10-160)/2+'px'}">
      <Dropdown class="drop" style="color:#fff" @on-click="drophld">
        <a href="javascript:void(0)" style="color:#fff">
            {{boiler}}
            <Icon type="ios-arrow-down"></Icon>
        </a>
        <DropdownMenu slot="list" >
            <DropdownItem v-for="(item,index) in boilers" :selected="item.id==boilerid" :name="item.k_Name_kw"  v-bind:key="'iuyiy'+index">{{item.k_Name_kw}}</DropdownItem>
        </DropdownMenu>
      </Dropdown>
      <!-- <span class="time" :style="{color:pageview==3?'#fff':'#222'}">{{boilertime}}</span> -->
    </div>


    <div  id="d3" class="allp" ></div>

    <div class="viewway" :style="{left: (kyqs.length>1?(w2-10-198):(w2-10-108))+'px',width: (kyqs.length>1?(200):(100))+'px',display: (kyqs.length>0?'block':'none')}">
      
      <div :class="kyqnow==s.text?'t1 c':'t1'" :style="{width: (kyqs.length>1?'50%':'100%')}" @click="chooceview(s.text)"  v-for="(s, index) in kyqs" :key="`kyq_li2_${index}`">
        {{s.text}}空预器<img :src="bj" v-if="s.text!=kyqnow && kyqbj" />
      </div>
      
    </div>


    <div class="viewway2" :style="{left: '15px'}" @click="zzls">
      <img class="l" :src="cjz"  />
      <div class="p0">转子硫酸氢氨沉积</div>
      <img class="w" :src="yico1" v-if="cjworn==1" />
    </div>


    <!-- 左侧边栏 -->
    <div id="queue1" class="queue1" v-if="loadok==1">
      <div class="warn yqc" v-if="yqzl=='偏高'&&cebtn1==ru&&lefttabindex=='l3'"><img  :src="j" />烟气侧阻力过大，建议在线隔离高压水冲洗</div>
      <!-- <div class="warn lfl" v-if="lfl_jy=='偏高'&&cebtn1==ru&&lefttabindex=='l2'"><img  :src="j" />漏风率过大，需进行漏风率测试试验</div> -->
      <div class="q">
        <Tabs id="q1"  class="tab" v-model="lefttabindex" >
        <TabPane :label="label1" name="l1" style="height:100%">
          <div class="ontime">
              <div class="item">
                <span class="huikan" @click="haldleBack('空预器运行电流')"><icon type="ios-videocam"/></span>
                <div class="iteml">空预器运行电流(A):</div><div class="itemr">{{leftobjfast.kyq_Run_Dl_Val}}<img v-if="dl=='超高'" :src="bj" /><img v-if="dl=='偏高'" :src="high" /><img v-if="dl=='优良'" :src="lv" /></div>
              </div>
              <div class="item">
                <div class="iteml">支承轴承油温(℃):</div><div class="itemr">{{leftobj.zczc_Oil_Temp_Val}}<img v-if="ywzc=='超高'" :src="bj" /><img v-if="ywzc=='偏高'" :src="high" /></div>
              </div>
              <div class="item">
                <div class="iteml">导向轴承油温(℃):</div><div class="itemr">{{leftobj.dxzc_Oil_Temp_Val}}<img v-if="ywdx=='超高'" :src="bj" /><img v-if="ywdx=='偏高'" :src="high" /></div>
              </div>
              <div class="item">
                <div class="iteml">支承轴承润滑油压差(MPa):</div><div class="itemr">{{leftobj.zczc_Oil_Dif_Val}}<img v-if="yczc=='超高'" :src="high" /></div>
              </div>
              <div class="item">
                <div class="iteml">导向轴承润滑油压差(MPa):</div><div class="itemr">{{leftobj.dxzc_Oil_Dif_Val}}<img v-if="ycdx=='超高'" :src="high" /></div>
              </div>
              <div class="item">
                <div class="iteml">空气出口温度(℃):</div><div class="itemr">{{leftobj.air_Temp_Out_Val}}</div>
              </div>
              <div class="item">
                <div class="iteml">空气入口温度(℃):</div><div class="itemr">{{leftobj.air_Temp_In_Val}}</div>
              </div>
              <div class="item">
                <div class="iteml">烟气进口温度(℃):</div><div class="itemr">{{leftobj.gas_Temp_In_Val}}</div>
              </div>
              <div class="item">
                <span class="huikan" @click="haldleBack('空气侧效率')"><icon type="ios-videocam"/></span>
                <div class="iteml">空气侧效率(%):</div><div class="itemr">{{(leftobj.air_Radio_Val*100)}}<img v-if="kqxl=='偏低'" :src="low1" /></div>
              </div>
              <div class="item">
                <span class="huikan" @click="haldleBack('烟气侧效率')"><icon type="ios-videocam"/></span>
                <div class="iteml">烟气侧效率(%):</div><div class="itemr">{{(leftobj.gas_Radio_Val*100)}}<img v-if="yqxl=='偏低'" :src="low1" /></div>
              </div>
              <div class="item">
                <div class="iteml">减速箱溫度(℃):</div><div class="itemr">{{(leftobjfast.reductionBoxTemperature)}}<img v-if="jsx=='偏高'" :src="high" /></div>
              </div>
              <div class="item">
                <div class="iteml">转速(rpm):</div><div class="itemr">{{ zs.toFixed(2) }}<img v-if="zs<0.2" :src="low1" /></div>
              </div>
              
          </div>
        </TabPane>
        <TabPane :label="label2" name="l2" style="height:100%">
          <div class="ontime">
              <div class="item">
                <div class="iteml">LCS运行状态:</div><div class="itemr">{{leftobjfast.lcs_Status==0?"未投运":"已投运"}}</div>
              </div>
              <div class="item">
                <div class="iteml">LCS运行模式:</div><div class="itemr">{{leftobjfast.lcsRunMode==0?"传感器":"温度控制"}}</div>
              </div>
              <p  noshade="noshade" size="1" class="splid"  />
              <div class="item" >
                <div class="iteml" >{{kyqnow}} 1 扇形板状态:</div><div class="itemr"  style="text-align: left;"><img v-if="leftobjfast.fanShapedPlateS1==2" :src="up" /><img v-if="leftobjfast.fanShapedPlateS1==1" :src="down" /><img v-if="leftobjfast.fanShapedPlateS1==0" :src="stop" />{{leftobjfast.fanShapedPlateP1}}mm</div>
              </div>
              <div class="item"  >
                <div class="iteml" >{{kyqnow}} 2 扇形板状态:</div><div class="itemr"  style="text-align: left;"><img v-if="leftobjfast.fanShapedPlateS2==2" :src="up" /><img v-if="leftobjfast.fanShapedPlateS2==1" :src="down" /><img v-if="leftobjfast.fanShapedPlateS2==0" :src="stop" />{{leftobjfast.fanShapedPlateP2}}mm</div>
              </div>
              <div class="item"  >
                <div class="iteml" >{{kyqnow}} 3 扇形板状态:</div><div class="itemr"  style="text-align: left;"><img v-if="leftobjfast.fanShapedPlateS3==2" :src="up" /><img v-if="leftobjfast.fanShapedPlateS3==1" :src="down" /><img v-if="leftobjfast.fanShapedPlateS3==0" :src="stop" />{{leftobjfast.fanShapedPlateP3}}mm</div>
              </div>

              <div class="item"  >
                <div class="iteml" >{{kyqnow}} 1 提升装置状态:</div><div class="itemr"  style="text-align: left;"><img style="right: 13px" v-if="leftobjfast.liftingDeviceS1==0" :src="gz" /><img style="right: 13px"  v-if="leftobjfast.liftingDeviceS1==1" :src="zc" /></div>
              </div>
              <div class="item"  >
                <div class="iteml" >{{kyqnow}} 2 提升装置状态:</div><div class="itemr"  style="text-align: left;"><img style="right: 13px"  v-if="leftobjfast.liftingDeviceS2==0" :src="gz" /><img style="right: 13px"  v-if="leftobjfast.liftingDeviceS2==1" :src="zc" /></div>
              </div>
              <div class="item"  >
                <div class="iteml" >{{kyqnow}} 3 提升装置状态:</div><div class="itemr"  style="text-align: left;"><img style="right: 13px"  v-if="leftobjfast.liftingDeviceS3==0" :src="gz" /><img style="right: 13px"  v-if="leftobjfast.liftingDeviceS3==1" :src="zc" /></div>
              </div>
              <!-- <div class="item">
                <div class="iteml">运行密封间隙(mm):</div><div class="itemr">{{leftobjfast.mfjx_Val}}</div>
              </div>
              <div class="item">
                <div class="iteml">漏风率(%):</div><div class="itemr">{{ (leftobjfast.wind_Out_Radio_Val*100).toFixed(2)}}<img v-if="lfl_pd=='偏高'" :src="high" /></div>
              </div> -->
          </div>
        </TabPane>
        <TabPane :label="label3" name="l3" style="height:100%">
          
          <div class="ontime">
              <div class="item">
                <div class="iteml">烟气侧入口压力(KPa):</div><div class="itemr">{{leftobjfast.gas_Press_In_Val}}</div>
              </div>
              <!-- <div class="item">
                <div class="iteml">烟气侧出口压力(KPa):</div><div class="itemr">{{leftobjfast.gas_Press_Out_Val}}</div>
              </div> -->
              <div class="item" style="border:0px">
                <span class="huikan" @click="haldleBack('烟气侧阻力')"><icon type="ios-videocam"/></span>
                <div class="iteml">烟气侧阻力(KPa):</div><div class="itemr">{{leftobjfast.res_Gas_Val}}<img v-if="yqzl=='偏高'" :src="high" /></div>
              </div>

              <p  noshade="noshade" size="1" class="splid"  />


              <div class="item">
                <div class="iteml">一次风进口压力(KPa):</div><div class="itemr">{{leftobjfast.wind1_Press_In_Val}}</div>
              </div>
              <!-- <div class="item">
                <div class="iteml">一次风出口压力(KPa):</div><div class="itemr">{{leftobjfast.wind1_Press_Out_Val}}</div>
              </div> -->
              <div class="item" style="border:0px">
                <span class="huikan" @click="haldleBack('一次风空气阻力')"><icon type="ios-videocam"/></span>
                <div class="iteml">一次风空气阻力(KPa):</div><div class="itemr">{{leftobjfast.res_Wind1_Val}}</div>
              </div>

              <p  noshade="noshade" size="1" class="splid"  />


              <div class="item" style="border-top:0px">
                <div class="iteml">二次风进口压力(KPa):</div><div class="itemr">{{leftobjfast.wind2_Press_In_Val}}</div>
              </div>
              <!-- <div class="item">
                <div class="iteml">二次风出口压力(KPa):</div><div class="itemr">{{leftobjfast.wind2_Press_Out_Val}}</div>
              </div> -->
              <div class="item" style="border:0px">
                <span class="huikan" @click="haldleBack('二次风空气阻力')"><icon type="ios-videocam"/></span>
                <div class="iteml">二次风空气阻力(KPa):</div><div class="itemr">{{leftobjfast.res_Wind2_Val}}</div>
              </div>

              <p  noshade="noshade" size="1" class="splid"  />


              
              <div class="item" style="border-top:0px">
                <div class="iteml">热端吹灰器蒸汽压力(MPa):</div><div class="itemr">{{leftobjfast.chq_Press_Hot_Val}}<img v-if="reya=='偏高'" :src="high" /><img v-if="reya=='偏低'" :src="low1" /></div>
              </div>
              <div class="item">
                <div class="iteml">冷端吹灰器蒸汽压力(MPa):</div><div class="itemr">{{leftobjfast.chq_Press_Cold_Val}}<img v-if="lengya=='偏高'" :src="high" /><img v-if="lengya=='偏低'" :src="low1" /></div>
              </div>
              <div class="item">
                <div class="iteml">热端吹灰器蒸汽温度(℃):</div><div class="itemr">{{leftobjfast.chq_Temp_Hot_Val}}<img v-if="rewen=='偏低'" :src="low1" /></div>
              </div>
              <div class="item">
                <div class="iteml">冷端吹灰器蒸汽温度(℃):</div><div class="itemr">{{leftobjfast.chq_Temp_Cold_Val}}<img v-if="lengwen=='偏低'" :src="low1" /></div>
              </div>
              <div class="item">
                <div class="iteml">高压水水泵运行压力(MPa):</div><div class="itemr">{{leftobjfast.gysb_Press_Val}}<img v-if="gaoya=='偏高'" :src="bj" /><img v-if="gaoya=='偏低'" :src="low1" /></div>
              </div>
          </div>
        </TabPane>
        </Tabs>
      </div>
      <div class="btn" @click="togle1">
        <img :src="cebtn1" />
        <div class="wenzi">运行监测</div>
      </div>
    </div>


    <!-- 右侧边栏 -->
    <div id="queue" class="queue" >
      
      <div class="btn" @click="togle">
        <img :src="cebtn" />
        <div class="wenzi">检修诊断</div>
      </div>
      <div class="q">
        <div class="ontime">
          <div class="item">
            <infor-card  color="#000080" icon="md-trending-down" :icon-size="39">
            <div class="zi">
            减速箱
            <p><img  :src="yico2" v-if="ttt1==''" /><img v-if="ttt1!=''"  :src="yico1" @mousemove="mousemoveevent($event,ttt1)"  @mouseout="mouseoutevent" /></p>
            </div>        
            </infor-card>
          </div>
          
          <div class="item">
            <infor-card  color="#c00040	" icon="md-nuclear" :icon-size="39">
            <div class="zi">
            漏风控制系统（LCS）
            <p><img  :src="yico2" v-if="ttt2==''" /><img v-if="ttt2!=''"  :src="yico1" @mousemove="mousemoveevent($event,ttt2)"  @mouseout="mouseoutevent" /></p>
            
            </div>        
            </infor-card>
          </div>

          <div class="item">
            <infor-card  color="#20a060" icon="ios-recording" :icon-size="39">
            <div class="zi">
            传热元件
            <p><img  :src="yico2" v-if="ttt3==''" /><img v-if="ttt3!=''"  :src="yico1" @mousemove="mousemoveevent($event,ttt3)"  @mouseout="mouseoutevent" /></p>
            
            </div>        
            </infor-card>
          </div>

          <div class="item">
            <infor-card  color="#007373" >
            <div class="yyy">
              <img :src="lun" class="im" />
              <div class="yy">{{bi1}}<sub>%</sub></div>
              <canvas width="50" height="50" class="can1"  style="
              position: absolute;
              z-index: 99;
              left:0px;
              top:0px;
              opacity: 0.7;
              "></canvas>
            </div>
            <div class="zi">
            支承轴承
            <p><img  :src="yico2" v-if="ttt5==''" /><img v-if="ttt5!=''"  :src="yico1" @mousemove="mousemoveevent($event,ttt5)"  @mouseout="mouseoutevent" /></p>
            
            </div>        
            </infor-card>
          </div>

          <div class="item">
            <infor-card  color="#2F4F4F" >
            <div class="yyy">
              <img :src="lun" class="im" />
              <div class="yy" style="background-color: #2F4F4F;">{{bi2}}<sub>%</sub></div>
              <canvas width="50" height="50" class="can1"  style="
              position: absolute;
              z-index: 99;
              left:0px;
              top:0px;
              opacity: 0.7;
              "></canvas>
            </div>
            <div class="zi">
            导向轴承
            <p><img  :src="yico2" v-if="ttt6==''" /><img v-if="ttt6!=''"  :src="yico1" @mousemove="mousemoveevent($event,ttt6)"  @mouseout="mouseoutevent" /></p>
            
            </div>        
            </infor-card>
          </div>

          <div class="item">
            <infor-card  color="Purple" icon="ios-ionic" :icon-size="39">
            <div class="zi">
            测速探头
            <p><img  :src="yico2" v-if="ttt7==''" /><img v-if="ttt7!=''"  :src="yico1" @mousemove="mousemoveevent($event,ttt7)"  @mouseout="mouseoutevent" /></p>
            
            </div>        
            </infor-card>
          </div>

          <div class="item">
            <infor-card  color="#4060c0" icon="logo-instagram" :icon-size="39">
            <div class="zi">
            密封片
            <p><img  :src="yico2" v-if="ttt8==''" /><img v-if="ttt8!=''"  :src="yico1" @mousemove="mousemoveevent($event,ttt8)"  @mouseout="mouseoutevent" /></p>
            
            </div>        
            </infor-card>
          </div>

          <div class="item" style="color:red;overflow-y: auto;;height:173px" v-html="ttt10">
          </div>

          </div>
      </div>
    </div>

  </div>

</div>
</template>

<script>
import store from '@/store'
//工具包
import { getDateMore,sortBy,gradientColor,getDate ,eqarr} from "@/libs/tools";
//机组
import { getBoilerListAll } from "@/api/ZNRS/Dncboiler";
import anime from 'animejs/lib/anime.js';
//echart数据
import {  } from '_c/charts'
import ECharts from "vue-echarts";
// 柱状图
import "echarts/lib/chart/bar";
// 折线
import "echarts/lib/chart/line";
// 饼状图
//import "echarts/lib/chart/pie";
// 提示
import "echarts/lib/component/tooltip";
import "echarts/lib/component/title";
// //热力图
// import "echarts/lib/chart/heatmap";
// import "echarts/lib/component/visualMap";
// 图例

// import "echarts/lib/component/markPoint";
// import "echarts/lib/component/markLine";
// import "echarts/lib/component/graphic";
//标题
import "echarts/lib/component/legend";
// import {leftdata_2_back} from "@/api/echart/wdzt2";

//c吹灰队列

//右键菜单
import VueContextMenu from 'vue-contextmenu/src/VueContextMenu';
//threejs
import * as THREE from 'three';
import {MTLLoader, OBJLoader} from 'three-obj-mtl-loader';
import { OrbitControls } from 'three/examples/js/controls/CCC';
import { CSS2DRenderer, CSS2DObject } from 'three/examples/jsm/renderers/CSS2DRenderer';
import { ColladaLoader } from 'three/examples/js/loaders/LLL';
import stats from 'stats-js';
// import dat from 'dat.gui';
import { irs,iks,ils,ias } from "@/api/chuihui/point";
import chu from "@/assets/images/chu.png";
import ru from "@/assets/images/ru.png";
//ziti
import EEE from "@/assets/font/iconfont.css";

import lv from "@/assets/images/lv.png";
import high from "@/assets/images/high1.png";
import bj from "@/assets/images/bj.gif";
import j from "@/assets/images/5.png";

import yico1 from "@/assets/images/timg.png";
import yico2 from "@/assets/images/timg1.png";
import low1 from "@/assets/images/low1.png";

import lun from "@/assets/images/lun.png";
import cjz from "@/assets/images/cjz.png";

import up from "@/assets/images/up.png";
import down from "@/assets/images/down.png";
import stop from "@/assets/images/stop.png";
import gz from "@/assets/images/gz.png";
import zc from "@/assets/images/zc.png";


import InforCard from '_c/info-card';
import {
  getKyqresultList,
  createKyqresult,
  loadKyqresult,
  editKyqresult,
  deleteKyqresult,
  batchCreateKyqresult
} from "@/api/ZNRS/Dnckyqresult";
import {
  getKyqresult_fastList,
  createKyqresult_fast,
  loadKyqresult_fast,
  editKyqresult_fast,
  deleteKyqresult_fast,
  batchCreateKyqresult_fast
} from "@/api/ZNRS/Dnckyqresult_fast";

import {
  getKyqconfigList,
  createKyqconfig,
  loadKyqconfig,
  editKyqconfig,
  deleteKyqconfig,
  batchCreateKyqconfig
} from "@/api/ZNRS/Dnckyqconfig";

import {
  getKyqpointList,
  createKyqpoint,
  loadKyqpoint,
  editKyqpoint,
  deleteKyqpoint,
  batchCreateKyqpoint
} from "@/api/ZNRS/Dnckyqpoint";


import {
  getKyqmadeList,
  createKyqmade,
  loadKyqmade,
  editKyqmade,
  deleteKyqmade,
  batchCommand,
  batchCreateKyqmade
} from "@/api/ZNRS/Dnckyqmade";


import { getKyqList,getKyqListAll } from "@/api/ZNRS/Dnckyq";


import { kyqhk_back } from "@/api/echart/kyqhk";
import {getKyqresult_fastdataList} from "@/api/ZNRS/Dnckyqresult_fastdata";
import {getKyqresultdataList} from "@/api/ZNRS/Dnckyqresultdata";

export default {
  name: "ZNRS_znkyq_page",
  components: {
    "vue-context-menu" : VueContextMenu,
     "v-chart": ECharts,
     InforCard
  },
  data() {
    return {
      huikan:{
        modal2:false,
        title:"",
        timebe:[],
        data:{}
      },
      kyqbj:false,
      cnum1:0,cnum2:0,cnum3:0,
      label1: (h) => {
                    return h('div', [
                        h('Badge', {
                            props: {
                                count: this.cnum1
                            }
                        }
                        ,
                        [h('span', '运行状态')]
                        )
                    ])
                },
      label2: (h) => {
                    return h('div', [
                        h('Badge', {
                            props: {
                                count: this.cnum2
                            }
                        }
                        ,
                        [h('span', '密封监测')])
                    ])
                },
      label3: (h) => {
                    return h('div', [
                        h('Badge', {
                            props: {
                                count: this.cnum3
                            }
                        }
                        ,
                        [h('span', '元件监测')])
                    ])
                },
     lv,high,bj,j,yico1,yico2,low1,lun,bi1:0,bi2:0,cjz,zc,gz,up,down,stop,
     lefttabindex:"l1",
     cjtop:50,cjheight:250,
     cjworn:0,
     lsqa:{
       opened:false,
       th:300,
       td:200,
       tc:100,
       t1:150,
       t2:100
     },
     ttt:"",
     //减速箱
     ttt1:"",
     //漏风控制系统（LCS）
     ttt2:"",
     //传热元件
     ttt3:"",
     //支承轴承
     ttt5:"",
     //导向轴承
     ttt6:"",
     //测速探头
     ttt7:"",
     //密封片
     ttt8:"",
     //维修建议
     ttt10:"",
     mades:[],
    //three 
      publicPath: process.env.BASE_URL,
      scene: null,
      camera: null,
      renderer: null,
      labelRenderer:null,
      controls:null,
      st:null,
      rotationSpeed: 0.02,

      scene2: null,
      camera2: null,
      renderer2: null,

      kyqs:[],
      kyqnow:'A',
      kyqlr:-1,
      kyqway:-1,
      kworn1:0,
      kworn2:0,

      btncolors:['#c23531','#2f4554','#61a0a8'],

      timer2:null,

      //机组
      boilertime:"",
      boilerid:-1,
      boiler:"",
      boilerNowStatus:-1,
      boilerSta_time:"",
      boilers:[],

      h2:0,
      w2:0,

      x:0,
      y:0,
      z:0,
      loadok:0,
      chu,ru,cebtn:ru,cebtn1:ru,
      rouletteScene:null,
      zt1:null,
      zt2:null,
      zt3:null,


      leftobjfast:{},
      leftobj:{},
      cf:{},
      lables:[],

      zsclip:['','',''],
      zs:0,
      zsindex:-1,
      raycaster:null,
      mouse:null,


      leftobjfast_b:{},
      leftobj_b:{},
      zsclip_b:['','',''],
      mades_b:[],
    }
  },
  watch:{
    
  },
  computed:{
    dl:function(){
        let r="";
        let o=this;
        if(!o.cf || o.cf==null||!o.leftobjfast.kyq_Run_Dl_Val){
          return "";
        }
        let ed=o.cf.eddl_Val;
        let nowdl=o.leftobjfast.kyq_Run_Dl_Val;
        if(nowdl>ed*0.8){
          r="超高";
        }else if(nowdl>ed*0.6){
          r="偏高";
        }else if(nowdl<ed*0.5){
          r="优良";
        }else{
          r="正常";
        }
        return r;
      },
    ywzc:function(){
        let r="";
        let o=this;
        // console.log(JSON.stringify(o.leftobj));
        if(!o.cf || o.cf==null||!o.leftobj.zczc_Oil_Temp_Val){
          return "";
        }
        let ywpg=o.cf.zczc_Oiltemp_Warn_Val;
        let ywbj=o.cf.zczc_Oiltemp_High_Val;
        let nowdl=o.leftobj.zczc_Oil_Temp_Val;
        // console.log("==="+nowdl);
        if(nowdl>ywbj){
          r="超高";
        }else if(nowdl>ywpg){
          r="偏高";
        }else{
          r="正常";
        }
        return r;
      },
    ywdx:function(){
        let r="";
        let o=this;
        if(!o.cf || o.cf==null||!o.leftobj.zczc_Oil_Temp_Val){
          return "";
        }
        let ywpg=o.cf.dxzc_Oiltemp_Warn_Val;
        let ywbj=o.cf.dxzc_Oiltemp_High_Val;

        let nowdl=o.leftobj.dxzc_Oil_Temp_Val;
        if(nowdl>ywbj){
          r="超高";
        }else if(nowdl>ywpg){
          r="偏高";
        }else{
          r="正常";
        }
        return r;
      },
    yczc:function(){
        let r="";
        let o=this;
        if(!o.cf || o.cf==null||!o.cf.oil_Press_Dif_Val){
          return "";
        }
        let v1=o.cf.oil_Press_Dif_Val;
        let now=o.leftobj.zczc_Oil_Dif_Val;
        if(now>v1){
          r="超高";
        }else{
          r="正常";
        }
        return r;
      },
    ycdx:function(){
        let r="";
        let o=this;
        if(!o.cf || o.cf==null||!o.cf.oil_Press_Dif_Val){
          return "";
        }
        let v1=o.cf.oil_Press_Dif_Val;
        let now=o.leftobj.dxzc_Oil_Dif_Val;
        if(now>v1){
          r="超高";
        }else{
          r="正常";
        }
        return r;
    },
    kqxl:function(){
        let r="";
        let o=this;
        if(!o.cf || o.cf==null||!o.cf.xl_Low){
          return "";
        }
        let kqxl1=o.leftobj.air_Radio_Val*100;
        let cfg=o.cf.xl_Low;
        if(kqxl1<cfg){
          r="偏低";
        }else{
          r="正常";
        }
        return r;
      },
    yqxl:function(){
        let r="";
        let o=this;
        
        if(!o.cf || o.cf==null||!o.cf.xl_Low){
          return "";
        }
        let kqxl1=o.leftobj.gas_Radio_Val*100;
        let cfg=o.cf.xl_Low;
        if(kqxl1<cfg){
          r="偏低";
        }else{
          r="正常";
        }
        return r;
      },
    lfl_pd:function(){
        let r="";
        let o=this;
        if(!o.cf || o.cf==null||!o.cf.lfl_High_Val){
          return "";
        }
        let v1=o.cf.lfl_High_Val;
        let now=o.leftobjfast.wind_Out_Radio_Val;
        
        if(now>v1){
          r="偏高";
        }else{
          r="正常";
        }
        return r;
    },
    lfl_jy:function(){
      let r="";
      let o=this;
      if(!o.cf || o.cf==null||!o.leftobjfast.wind_Out_Radio_Val){
        return "";
      }
      let v1=o.cf.ifl_Design_Val;

      let now=o.leftobjfast.wind_Out_Radio_Val;
      if(now>v1*1.5){
        r="偏高";
      }else{
        r="正常";
      }
      return r;
    },
    yqzl:function(){
      let r="";
      let o=this;
      if(!o.cf || o.cf==null||!o.cf.gasair_Res_Ini_Val){
        return "";
      }
      let v1=o.cf.gasair_Res_Ini_Val*1.5;
      let v2=o.cf.gasair_Res_High_Val;

      let now=o.leftobjfast.res_Gas_Val;
      // console.log(v1); console.log(v2);
      //   console.log(now);
      if(now>=v1||now>v2){
        r="偏高";
      }else{
        r="正常";
      }
      return r;
    },
    reya:function(){
      let r="";
      let o=this;
      if(!o.cf || o.cf==null||!o.cf.hot_Chq_Press_High_Val){
        return "";
      }
      let v1=o.cf.hot_Chq_Press_Low_Val;
      let v2=o.cf.hot_Chq_Press_High_Val;
      let now=o.leftobjfast.chq_Press_Hot_Val;
      if(now>v2){
        r="偏高";
      }else if(now<v1){
        r="偏低";
      }else{
        r="正常";
      }
      return r;
    },
    lengya:function(){
      let r="";
      let o=this;
      if(!o.cf || o.cf==null||!o.cf.hot_Chq_Press_High_Val){
        return "";
      }
      let v1=o.cf.cold_Chq_Press_Low_Val;
      let v2=o.cf.cold_Chq_Press_High_Val;
      let now=o.leftobjfast.chq_Press_Cold_Val;
      if(now>v2){
        r="偏高";
      }else if(now<v1){
        r="偏低";
      }else{
        r="正常";
      }
      return r;
    },
    rewen:function(){
      let r="";
      let o=this;
      if(!o.cf || o.cf==null||!o.cf.chq_Temp_Low_Val){
        return "";
      }
      let v1=o.cf.chq_Temp_Low_Val;
      let now=o.leftobjfast.chq_Temp_Hot_Val;
      if(now<v1){
        r="偏低";
      }else{
        r="正常";
      }
      return r;
    },
    lengwen:function(){
      let r="";
      let o=this;
      if(!o.cf || o.cf==null||!o.cf.chq_Temp_Low_Val){
        return "";
      }
      let v1=o.cf.chq_Temp_Low_Val;
      let now=o.leftobjfast.chq_Temp_Cold_Val;
      if(now<v1){
        r="偏低";
      }else{
        r="正常";
      }
      return r;
    },
    gaoya:function(){
      let r="";
      let o=this;
      if(!o.cf || o.cf==null||!o.cf.gysb_Press_Low_Val){
        return "";
      }
      let v1=o.cf.gysb_Press_Low_Val;
      let v2=o.cf.gysb_Press_High_Val;
      let now=o.leftobjfast.gysb_Press_Val;
      if(now>v2){
        r="偏高";
      }else if(now<v1){
        r="偏低";
      }else{
        r="正常";
      }
      return r;
      //gysb_Press_Val
    },
    jsx:function(){
      let r="";
      let o=this;
      if(!o.cf || o.cf==null||!o.cf.gysb_Press_Low_Val){
        return "";
      }
      let cf=o.cf.temperatureDifference;
      let jsx=o.leftobjfast.reductionBoxTemperature;
      let hj=o.leftobjfast.environmentTemperature;
      if(jsx - hj > cf ){
        r="偏高";
      }else{
        r="正常";
      }
      return r;
      //gysb_Press_Val
    },
  },
  //Ifl_Design_Val
  methods: {
    dateFormat(fmt, date) {
        let ret;
        const opt = {
            "y+": date.getFullYear().toString(),        // 年
            "M+": (date.getMonth() + 1).toString(),     // 月
            "d+": date.getDate().toString(),            // 日
            "H+": date.getHours().toString(),           // 时
            "m+": date.getMinutes().toString(),         // 分
            "s+": date.getSeconds().toString()          // 秒
            // 有其他格式化字符需求可以继续添加，必须转化成字符串
        };
        for (let k in opt) {
            ret = new RegExp("(" + k + ")").exec(fmt);
            if (ret) {
                fmt = fmt.replace(ret[1], (ret[1].length == 1) ? (opt[k]) : (opt[k].padStart(ret[1].length, "0")))
            };
        };
        return fmt;
    },
    hqkdate(t){
      let d1=new Date();
      d1=d1.setDate(d1.getDate()-1);
      let d2=new Date();
      d2=d2.setDate(d2.getDate()-2);

      if(t==1){
        this.backview(this.huikan.title,this.dateFormat("yyyy-MM-dd 00:00",new Date(d1)),this.dateFormat("yyyy-MM-dd 23:59",new Date(d1)));
      }else if(t==2){
        this.backview(this.huikan.title,this.dateFormat("yyyy-MM-dd 00:00",new Date(d2)),this.dateFormat("yyyy-MM-dd 23:59",new Date(d2)));
      }
    },
    haldleBackData(date){
      let d1=date[0];
      let d2=date[1];
      this.backview(this.huikan.title,d1,d2);
    },
    haldleBack(title){
      let dateTime=new Date();
      dateTime=dateTime.setDate(dateTime.getDate()-1);
      this.backview(title,this.dateFormat("yyyy-MM-dd HH:mm",new Date(dateTime)),this.dateFormat("yyyy-MM-dd HH:mm",new Date()));
    },
    //回看函数
    backview(title,d1,d2){
      let o=this;
      let huikandata={};
      if(title=="空预器运行电流"){//kyq_Run_Dl_Val
        huikandata=kyqhk_back('空预器运行电流',o.cf.eddl_Val*0.6);
        getKyqresult_fastdataList({
            totalCount: 0,
            pageSize: 2000,
            currentPage: 1,
            kw: "",
            isDeleted: 0,
            status: -1,
            boilerid: o.boilerid,
            kyq: o.kyqnow,
            d1:d1,
            d2:d2,
            sort: [
              {
                direct: "DESC",
                field: "realTime"
              }
            ]
          }).then(res => {
          let k= getDateMore(res.data.data,5,["realTime",]).reverse();
          let realtime=k.map(x=>{ return x.realTime});
          //温度 
          huikandata.xAxis[0].data=realtime;
          huikandata.series[0].data=k.map(x=>{return (x.kyq_Run_Dl_Val).toFixed(2) });
          o.huikan={
            title:title,
            modal2:true,
            data:huikandata,
            timebe:[d1,d2]
          };
        });
      }else if(title=='空气侧效率'){
        //air_Radio_Val*100
        huikandata=kyqhk_back('空气侧效率',o.cf.xl_Low);
        getKyqresultdataList({
            totalCount: 0,
            pageSize: 2000,
            currentPage: 1,
            kw: "",
            isDeleted: 0,
            status: -1,
            boilerid: o.boilerid,
            kyq: o.kyqnow,
            d1:d1,
            d2:d2,
            sort: [
              {
                direct: "DESC",
                field: "realTime"
              }
            ]
          }).then(res => {
          let k= getDateMore(res.data.data,3,["realTime",]).reverse();
          let realtime=k.map(x=>{ return x.realTime});
          //温度 
          huikandata.xAxis[0].data=realtime;
          huikandata.series[0].data=k.map(x=>{return ((x.air_Radio_Val*100).toFixed(2)) });
          o.huikan={
            title:title,
            modal2:true,
            data:huikandata,
            timebe:[d1,d2]
          };
        });
      }else if(title=='烟气侧效率'){
        //gas_Radio_Val
        huikandata=kyqhk_back('烟气侧效率',o.cf.xl_Low);
        getKyqresultdataList({
            totalCount: 0,
            pageSize: 2000,
            currentPage: 1,
            kw: "",
            isDeleted: 0,
            status: -1,
            boilerid: o.boilerid,
            kyq: o.kyqnow,
            d1:d1,
            d2:d2,
            sort: [
              {
                direct: "DESC",
                field: "realTime"
              }
            ]
          }).then(res => {
          let k= getDateMore(res.data.data,3,["realTime",]).reverse();
          let realtime=k.map(x=>{ return x.realTime});
          //温度 
          huikandata.xAxis[0].data=realtime;
          huikandata.series[0].data=k.map(x=>{return ((x.gas_Radio_Val*100).toFixed(2)) });
          o.huikan={
            title:title,
            modal2:true,
            data:huikandata,
            timebe:[d1,d2]
          };
        });
      }else if(title=='烟气侧阻力'){
        //leftobjfast.res_Gas_Val
        let v1=o.cf.gasair_Res_Ini_Val*1.5;
        let v2=o.cf.gasair_Res_High_Val;
        huikandata=kyqhk_back('烟气侧阻力',v1>v2?v2:v1);
        getKyqresult_fastdataList({
            totalCount: 0,
            pageSize: 2000,
            currentPage: 1,
            kw: "",
            isDeleted: 0,
            status: -1,
            boilerid: o.boilerid,
            kyq: o.kyqnow,
            d1:d1,
            d2:d2,
            sort: [
              {
                direct: "DESC",
                field: "realTime"
              }
            ]
          }).then(res => {
          let k= getDateMore(res.data.data,3,["realTime",]).reverse();
          let realtime=k.map(x=>{ return x.realTime});
          //温度 
          huikandata.xAxis[0].data=realtime;
          huikandata.series[0].data=k.map(x=>{return (x.res_Gas_Val).toFixed(2) });
          o.huikan={
            title:title,
            modal2:true,
            data:huikandata,
            timebe:[d1,d2]
          };
        });
      }else if(title=='一次风空气阻力'){
        //res_Wind1_Val
        huikandata=kyqhk_back('一次风空气阻力',0);
        getKyqresult_fastdataList({
            totalCount: 0,
            pageSize: 2000,
            currentPage: 1,
            kw: "",
            isDeleted: 0,
            status: -1,
            boilerid: o.boilerid,
            kyq: o.kyqnow,
            d1:d1,
            d2:d2,
            sort: [
              {
                direct: "DESC",
                field: "realTime"
              }
            ]
          }).then(res => {
          let k= getDateMore(res.data.data,3,["realTime",]).reverse();
          let realtime=k.map(x=>{ return x.realTime});
          //温度 
          huikandata.xAxis[0].data=realtime;
          huikandata.series[0].data=k.map(x=>{return (x.res_Wind1_Val).toFixed(2) });
          o.huikan={
            title:title,
            modal2:true,
            data:huikandata,
            timebe:[d1,d2]
          };
        });
      }else if(title=='二次风空气阻力'){
        //res_Wind2_Val
        huikandata=kyqhk_back('二次风空气阻力',0);
        getKyqresult_fastdataList({
            totalCount: 0,
            pageSize: 2000,
            currentPage: 1,
            kw: "",
            isDeleted: 0,
            status: -1,
            boilerid: o.boilerid,
            kyq: o.kyqnow,
            d1:d1,
            d2:d2,
            sort: [
              {
                direct: "DESC",
                field: "realTime"
              }
            ]
          }).then(res => {
          let k= getDateMore(res.data.data,3,["realTime",]).reverse();
          let realtime=k.map(x=>{ return x.realTime});
          //温度 
          huikandata.xAxis[0].data=realtime;
          huikandata.series[0].data=k.map(x=>{return (x.res_Wind2_Val).toFixed(2) });
          o.huikan={
            title:title,
            modal2:true,
            data:huikandata,
            timebe:[d1,d2]
          };
        });
      }
    },

    zzls(){
      this.lsqa.opened=true;
      this.loadcj();
    },
    mousemoveevent(e,t){
      this.ttt=t;
      let r = document.querySelectorAll(".tooltipar");
      r[0].style.left=e.pageX-300+"px";
      

      let t1=document.querySelectorAll(".content-wrapper")[0];
      r[0].style.top=e.pageY-90+t1.scrollTop+"px";
    },
    mouseoutevent(e){
      this.ttt="";
      let r = document.querySelectorAll(".tooltipar");
      r[0].style.left=-300+"px";
      r[0].style.top=-90+"px";
    },
    dateFormat(fmt, date) {
        let ret;
        const opt = {
            "y+": date.getFullYear().toString(),        // 年
            "M+": (date.getMonth() + 1).toString(),     // 月
            "d+": date.getDate().toString(),            // 日
            "H+": date.getHours().toString(),           // 时
            "m+": date.getMinutes().toString(),         // 分
            "s+": date.getSeconds().toString()          // 秒
            // 有其他格式化字符需求可以继续添加，必须转化成字符串
        };
        for (let k in opt) {
            ret = new RegExp("(" + k + ")").exec(fmt);
            if (ret) {
                fmt = fmt.replace(ret[1], (ret[1].length == 1) ? (opt[k]) : (opt[k].padStart(ret[1].length, "0")))
            };
        };
        return fmt;
    },
    togle(){
      let t=document.querySelectorAll(".queue");
      if(this.cebtn==this.ru){
        this.cebtn=this.chu;
        anime({
            targets: t[0],
            translateX: 318,
            duration: 1000
          });
      }else{
        this.cebtn=this.ru;
        anime({
            targets: t[0],
            translateX: 0,
            duration: 1000
          });
      }
    },
    togle1(){
      let t=document.querySelectorAll(".queue1");
      if(this.cebtn1==this.ru){
        this.cebtn1=this.chu;
        anime({
            targets: t[0],
            translateX: -318,
            duration: 1000
          });
      }else{
        this.cebtn1=this.ru;
        anime({
            targets: t[0],
            translateX: 0,
            duration: 1000
          });
      }
    },  
    drophld(name){
      this.boilers.map(o=>{
        if(o.k_Name_kw==name){
          this.boilerid=o.id;
          this.boiler=o.k_Name_kw;
          this.boilertime=o.syntime;
          getKyqList({
            totalCount: 0,
            pageSize: 20,
            currentPage: 1,
            kw: "",
            isDeleted: 0,
            status: -1,
            boilerid:this.boilerid,
            sort: [
              {
                direct: "ASC",
                field: "id"
              }
            ]
          }).then(res => {
            let t=[];
            for(var i=0;i<res.data.data.length;i++){
                var item = res.data.data[i];
                t.push({ value: item.id , text: item.k_Name_kw, disabled: !item.status,c:0 , lr:item.lr,way:item.way});
            }
            this.kyqs=t;
            // console.log(JSON.stringify(res.data.data));
            this.kyqnow=t.length>0?t[0].text:'';
            this.kyqlr=t.length>0?t[0].lr:'';
            this.kyqway=t.length>0?t[0].way:'';
            // console.log(this.kyqlr+"--"+this.kyqway);

            for(var i=0;i<this.kyqs.length;i++){
              if(this.kyqs[i].text==this.kyqnow){
                this.kyqlr=this.kyqs[i].lr;
                this.kyqway=this.kyqs[i].way;
                break;
              }
            }

            this.h2=window.screen.height-90;
            this.w2=window.screen.width-90;

            this.mini2d=(this.w2-10)/4/6-(this.w2-10)/4/18;
            this.mg1=(this.w2-10)/4/22;
            this.mg2=-(this.w2-10)/4/6/3;
            //初始化3d
            
            let container = document.getElementById('d3');
            container.innerHTML="";
            o.scene =null;
            o.camera =null;
            o.rouletteScene=null;
            o.renderer=null;
            o.labelRenderer=null;
            o.controls=null;
            o.raycaster=null;
            o.mouse=null;
            this.loadresult();
            this.init();
           // this.animate();
            clearInterval(this.timer2);
            o.timer2=setInterval(() => {

              if(o.boilerid==-1){
                return;
              }
              this.h2=window.screen.height-90;
                this.w2=window.screen.width-90;
                this.mini2d=(this.w2-10)/4/6-(this.w2-10)/4/18;
                this.mg1=(this.w2-10)/4/22;
                this.mg2=-(this.w2-10)/4/6/3;
                //初始化3d

                this.loadresult();
                this.init2();
               // this.animate();
            }, 30000);
          });
        }
      });
      
    },
    init() {
      let o=this;
      let container = document.getElementById('d3');
      o.scene = new THREE.Scene();
      o.camera = new THREE.PerspectiveCamera(60, (o.w2-10) / o.h2, 0.1, 10);
      o.camera.position.set( 0.1, 0.2, 0.5 );
      let path = "/";
      let urls = [
        path + "2.png", path + "2.png",
        path + "2.png", path + "2.png",
        path + "2.png", path + "2.png"
      ];

      let textureCube = new THREE.CubeTextureLoader().load(urls);
      textureCube.encoding = THREE.sRGBEncoding;



      let material = new THREE.MeshPhysicalMaterial({
        color:0xffffff,
        // 材质像金属的程度. 非金属材料，如木材或石材，使用0.0，金属使用1.0，中间没有（通常）.
        // 默认 0.5. 0.0到1.0之间的值可用于生锈的金属外观
        metalness: 1.0,
        // 材料的粗糙程度. 0.0表示平滑的镜面反射，1.0表示完全漫反射. 默认 0.5
        roughness: 0.1,
        // 设置环境贴图
        envMap: textureCube,
        // 反射程度, 从 0.0 到1.0.默认0.5.
        // 这模拟了非金属材料的反射率。 当metalness为1.0时无效
        // reflectivity: 0.5,
      })




			let material2 = new THREE.MeshPhysicalMaterial({
        color:0xf99110,
        // 材质像金属的程度. 非金属材料，如木材或石材，使用0.0，金属使用1.0，中间没有（通常）.
        // 默认 0.5. 0.0到1.0之间的值可用于生锈的金属外观
        metalness: 0.7,
        // 材料的粗糙程度. 0.0表示平滑的镜面反射，1.0表示完全漫反射. 默认 0.5
        roughness: 0.2,
        // 设置环境贴图
        envMap: textureCube,
        // 反射程度, 从 0.0 到1.0.默认0.5.
        // 这模拟了非金属材料的反射率。 当metalness为1.0时无效
        // reflectivity: 0.5,
      })


      var loader = new ColladaLoader();
      
      let ps=`${o.publicPath}model/kyq.dae`;
      // console.log(o.kyqlr);
      if(o.kyqlr==1){
        ps=`${o.publicPath}model/kyq2.dae`;
      }

      loader.load(ps, function( collada ){
        collada.scene.traverse( function ( child ) {
          if ( child instanceof THREE.Mesh ) {
            child.material = material2;
          }
        });

        let rouletteScene = collada.scene;
        rouletteScene.scale.set(0.03,0.03,0.03);
        o.scene.add(rouletteScene);

        let loading=document.querySelectorAll("#pload");
        loading[0].style.display="none";
        o.loadok=1;
      },
      function( xhr) {
        console.log((xhr.loaded/xhr.total * 100)+"% loaded");
      });

      loader = new ColladaLoader();
      loader.load(`${o.publicPath}model/kyqd.dae`, function( collada ){
        collada.scene.traverse( function ( child ) {
          if ( child instanceof THREE.Mesh ) {
            child.material = material;
          }
        });
        o.rouletteScene = collada.scene;
        o.rouletteScene.scale.set(0.016,0.016,0.016);
        o.rouletteScene.position.set(0, 0, 0.001);
        o.rouletteScene.rotation.z =0;
        o.scene.add(o.rouletteScene);
      },
      function( xhr) {
        console.log((xhr.loaded/xhr.total * 100)+"% loaded");
      });

      loader = new ColladaLoader();
      loader.load(`${o.publicPath}model/zt.dae`, function( collada ){
        let zt1 = collada;
        zt1.scene.scale.set(0.005,0.005,0.005);
        zt1.scene.position.set(0.05, -0.01, 0.13);
        zt1.scene.rotation.z = 0.3;
        o.scene.add(zt1.scene);
      },
      function( xhr) {
        console.log((xhr.loaded/xhr.total * 100)+"% loaded");
      });

      loader = new ColladaLoader();
      loader.load(`${o.publicPath}model/zt.dae`, function( collada ){
        let zt2 = collada;
        zt2.scene.scale.set(0.005,0.005,0.005);
        zt2.scene.position.set(0.06, -0.01, 0.126);
        zt2.scene.rotation.z = 0.4;
        o.scene.add(zt2.scene);
      },
      function( xhr) {
        console.log((xhr.loaded/xhr.total * 100)+"% loaded");
      });

      loader = new ColladaLoader();
      loader.load(`${o.publicPath}model/zt.dae`, function( collada ){
        let zt3 = collada;
        zt3.scene.scale.set(0.005,0.005,0.005);
        zt3.scene.position.set(0.07, -0.01, 0.121);
        zt3.scene.rotation.z = 0.52;
        o.scene.add(zt3.scene);
      },
      function( xhr) {
        
      });

      //面
      let grid = new THREE.GridHelper(1, 20, 0x883333, 0x444444);
      grid.position.set(0, -0.16, 0);
      grid.material.transparent = true;
      o.scene.add(grid);
      o.renderer = new THREE.WebGLRenderer({
        antialias: true, // true/false表示是否开启反锯齿
        alpha: false, // true/false 表示是否可以设置背景色透明
        precision: 'highp', // highp/mediump/lowp 表示着色精度选择
        premultipliedAlpha: false, // true/false 表示是否可以设置像素深度（用来度量图像的分辨率）
        preserveDrawingBuffer: true, // true/false 表示是否保存绘图缓冲
        maxLights: 1, // 最大灯光数
        stencil: false // false/true 表示是否使用模板字体或图案
      });
      o.renderer.setSize(o.w2-10, o.h2);


      o.labelRenderer = new CSS2DRenderer();
      o.labelRenderer.setSize(o.w2-10, o.h2);
      o.labelRenderer.domElement.style.position = 'absolute';
      o.labelRenderer.domElement.style.top = '0px';
      container.appendChild(o.labelRenderer.domElement);

      o.controls = new OrbitControls(o.camera,o.labelRenderer.domElement);
      o.controls.target.set(0, 0, 0);// 设置控制器的焦点，使控制器围绕这个焦点进行旋转
      o.controls.update();// 照相机转动时，必须更新该控制器
        
      container.appendChild(o.renderer.domElement);

      o.threemes();

      o.raycaster = new THREE.Raycaster();
      o.mouse = new THREE.Vector2();
      o.labelRenderer.domElement.addEventListener("mousemove", o.mousett);


      //环境光会均匀的照亮场景中的所有物体。
      // o.scene.add(new THREE.AmbientLight(0xffffff));
      
      var light = new THREE.HemisphereLight( 0x999999, 0xffffff, 1.2 );
      o.scene.add( light );
    },

    init2(){
      let o=this;
      o.labelRenderer.domElement.removeEventListener("mousemove", o.mousett);
      o.labelRenderer.domElement.addEventListener("mousemove", o.mousett);
    },
    mousett(event){
      let o=this;
      event.preventDefault();
          o.mouse.x = (event.clientX / o.labelRenderer.domElement.clientWidth) * 2 - 1 - 0.1;
          o.mouse.y = -(event.clientY / o.labelRenderer.domElement.clientHeight) * 2 + 1 + 0.1 ;
          
          o.raycaster.setFromCamera(o.mouse, o.camera);
          let objects=[o.zt1,o.zt2,o.zt3];
          let intersects = o.raycaster.intersectObjects(objects);
          //console.log(intersects.length);
          
          if (intersects.length > 0) {
              let obj = intersects[0].object;
              //  console.log(obj.name);
              o.showlable(obj);
          }else{
              o.clearlable();
          }
    },
    clearlable(){
      let o=this;
      
      o.lables.map(x=>{
        if(x.k=="zt1"){
          o.zt1.remove(x.v);
        }else if(x.k=="zt2"){
          o.zt2.remove(x.v);
        }else if(x.k=="zt3"){
          o.zt3.remove(x.v);
        }
      });
      o.lables=[];
    },
    showlable(obj){
      let o=this;
      let earthDiv = document.createElement( 'div' );
      earthDiv.id=obj.name;
      earthDiv.className = 'labeles6';
      // <span v-if="zsindex==3 " style="color:red">(偏离)</span>
      earthDiv.innerHTML = "转速探头 "+ obj.name.substr(2) +" : "+ o.zsclip[parseInt(obj.name.substr(2)-1)]+" rpm"+(o.zsindex==parseInt(obj.name.substr(2))?"<br>偏离":"");
      earthDiv.style.marginTop = '-2.8em';

      let earthLabel = new CSS2DObject( earthDiv );
      earthLabel.position.set( 0, 0, 0 );

      if(obj.name=="zt1"){
        o.zt1.add(earthLabel);
      }else if(obj.name=="zt2"){
        o.zt2.add(earthLabel);
      }else if(obj.name=="zt3"){
        o.zt3.add(earthLabel);
      }

      o.lables.push({k:obj.name,v:earthLabel});
    },
    chooceview(u){

      // alert(document.documentElement.scrollTop||document.body.scrollTop);

      
      this.kyqnow=u;

      for(var i=0;i<this.kyqs.length;i++){
        if(this.kyqs[i].text==this.kyqnow){
          console.log(JSON.stringify(this.kyqs[i]));
          this.kyqlr=this.kyqs[i].lr;
          this.kyqway=this.kyqs[i].way;
          break;
        }
      }
      

      let o = this;


      o.h2=window.screen.height-90;
      o.w2=window.screen.width-90;

      o.mini2d=(o.w2-10)/4/6-(o.w2-10)/4/18;
      o.mg1=(o.w2-10)/4/22;
      o.mg2=-(o.w2-10)/4/6/3;
      //初始化3d
      
      let container = document.getElementById('d3');
      container.innerHTML="";
      o.scene =null;
      o.camera =null;
      o.rouletteScene=null;
      o.renderer=null;
      o.labelRenderer=null;
      o.controls=null;
      o.raycaster=null;
      o.mouse=null;
      o.loadresult();
      o.init();

      clearInterval(this.timer2);
      o.timer2=setInterval(() => {

              if(o.boilerid==-1){
                return;
              }
              this.h2=window.screen.height-90;
                this.w2=window.screen.width-90;
                this.mini2d=(this.w2-10)/4/6-(this.w2-10)/4/18;
                this.mg1=(this.w2-10)/4/22;
                this.mg2=-(this.w2-10)/4/6/3;
                //初始化3d

                this.loadresult();
                this.init2();
      }, 5000);
    },
    //zsindex
    calzx(){
      let o=this;
      if(o.zsclip[0]!=''){
        // console.log(o.zsclip[0]+"-"+o.zsclip[1]+"-"+o.zsclip[2]);
        let avg=(o.zsclip[0]+o.zsclip[1]+o.zsclip[2])/3;
        // console.log(avg);
        var arr = [Math.abs(avg-o.zsclip[0]),Math.abs(avg-o.zsclip[1]),Math.abs(avg-o.zsclip[2])];
        var max = arr.reduce(function(a , b){
        return b > a ? b : a;
        });
        // console.log(max);
        let i=-1;
        if(arr[0]==max)i=0;
        if(arr[1]==max)i=1;
        if(arr[2]==max)i=2;

        // console.log(o.zsclip[i]);
        if(o.zsclip[i]>=o.zsclip[0]&&o.zsclip[i]>=o.zsclip[1]&&o.zsclip[i]>=o.zsclip[2]){
          if(o.zsclip[i]>1.1*o.zsclip[0]||o.zsclip[i]>1.1*o.zsclip[1]||o.zsclip[i]>1.1*o.zsclip[2]){
            o.zsindex=i+1;
          }else{
            o.zsindex=-1;
          }
        }else{
          if(1.1*o.zsclip[i]<o.zsclip[0]||1.1*o.zsclip[i]<o.zsclip[1]||1.1*o.zsclip[i]<o.zsclip[2]){
            o.zsindex=i+1;
          }else{
            o.zsindex=-1;
          }
        }

        if(o.zsindex==-1){
          o.zs=avg;
        }else if(o.zsindex==1){
          o.zs=(o.zsclip[1]+o.zsclip[2])/2;
        }else if(o.zsindex==2){
          o.zs=(o.zsclip[0]+o.zsclip[2])/2;
        }else if(o.zsindex==3){
          o.zs=(o.zsclip[0]+o.zsclip[1])/2;
        }
        
      }

      
    },
    threemes(){
      let o=this;
      
      let radiolll=0.0019;
      let geometry = new THREE.CylinderGeometry(radiolll,radiolll, 0.03, 20);

      o.zt1 = new THREE.Mesh(geometry);
      o.zt1.position.set(0.055, -0.01, 0.145);
      o.zt1.rotation.x = 1.56;
      o.zt1.rotation.z = -0.3;
      o.zt1.name = "zt1";

      o.zt2 = new THREE.Mesh(geometry);
      o.zt2.position.set(0.0667, -0.01, 0.141);
      o.zt2.rotation.x = 1.56;
      o.zt2.rotation.z = -0.4;
      o.zt2.name = "zt2";

      o.zt3 = new THREE.Mesh(geometry);
      o.zt3.position.set(0.0784, -0.01, 0.136);
      o.zt3.rotation.x = 1.56;
      o.zt3.rotation.z = -0.52;
      o.zt3.name = "zt3";
      
      o.scene.add(o.zt1);
      o.scene.add(o.zt2);
      o.scene.add(o.zt3);
    },
    animate() {
      let o=this;
      requestAnimationFrame(o.animate);
      if(o.rouletteScene!=null){
        
        if(o.zsclip[0]!=""){
          let speed=0;
          if(o.zsindex==-1){
            speed=(o.zsclip[0]+o.zsclip[1]+o.zsclip[2])/3;
          }else if(o.zsindex==1){
            speed=(o.zsclip[1]+o.zsclip[2])/2;
          }else if(o.zsindex==2){
            speed=(o.zsclip[0]+o.zsclip[2])/2;
          }else if(o.zsindex==3){
            speed=(o.zsclip[0]+o.zsclip[1])/2;
          }

          // console.log(speed);
          //顺时针
          if(o.kyqway==0){
            o.rouletteScene.rotation.z = o.rouletteScene.rotation.z - speed*0.001;
          }else{
            o.rouletteScene.rotation.z = o.rouletteScene.rotation.z + speed*0.001;
          }
        }
      }
      o.renderer.render(o.scene, o.camera);
      o.labelRenderer.render(o.scene, o.camera);
    },
//机组加载
    initboiler(){
      let o=this;
      getBoilerListAll().then(res => {
          o.boilers=getDateMore(res.data.data,-1,["syntime",]);
          if(o.boilerid==-1){
            o.boiler=o.boilers[2].k_Name_kw;
            o.boilerid=o.boilers[2].id;
            o.boilertime=o.boilers[2].syntime;
          }else{
            o.boilers.map(x=>{
              if(x.id==o.boilerid){
                o.boilertime=x.syntime;
              }
            });
            
          }

          getKyqconfigList({
                  totalCount: 0,
                  pageSize: 20,
                  currentPage: 1,
                  kw: "",
                  isDeleted: 0,
                  status: 1,
                  boilerid:o.boilerid,
                  sort: [
                    {
                      direct: "DESC",
                      field: "id"
                    }
                  ]
                }).then(res => {
              if(res.data.data.length==0){
                o.$Message.warning('该机组无空预器配置数据！');
              }else{
                o.cf=getDateMore(res.data.data,1,[])[0];
                o.loadjx();
              }
          });


          getKyqList({
            totalCount: 0,
            pageSize: 20,
            currentPage: 1,
            kw: "",
            isDeleted: 0,
            status: -1,
            boilerid:this.boilerid,
            sort: [
              {
                direct: "ASC",
                field: "id"
              }
            ]
          }).then(res => {
            let t=[];
            for(var i=0;i<res.data.data.length;i++){
                var item = res.data.data[i];
                t.push({ value: item.id , text: item.k_Name_kw, disabled: !item.status,c:0 , lr:item.lr,way:item.way});
            }
            // console.log(JSON.stringify(t));
            o.kyqs=t;
            o.kyqnow=t.length>0?t[0].text:'';

            for(var i=0;i<this.kyqs.length;i++){
              if(this.kyqs[i].text==this.kyqnow){
                this.kyqlr=this.kyqs[i].lr;
                this.kyqway=this.kyqs[i].way;
                // console.log(JSON.stringify(this.kyqs[i]));
                break;
              }
            }
          });

      });
    },
    loadresult(){
      let o=this;//this.kyqnow

      new Promise(function(resolve){
        getKyqresult_fastList({
            totalCount: 0,
            pageSize: 20,
            currentPage: 1,
            kw: "",
            kyq:"",//o.kyqnow,
            boilerid:o.boilerid,
            isDeleted: 0,
            status: -1,
            sort: [
              {
                direct: "DESC",
                field: "id"
              }
            ]
          }).then(res => {
          let arr=getDateMore(res.data.data,1,["realTime",]);
          o.leftobjfast = arr.filter(x=>x.dncKyq_Name.substr(0,1)==o.kyqnow)[0];
          o.leftobjfast_b=arr.filter(x=>x.dncKyq_Name.substr(0,1)!=o.kyqnow)[0];
          resolve(res);
          
        });
      }).then(()=>{
        return new Promise(resolve=>{
            getKyqresultList({
                totalCount: 0,
                pageSize: 20,
                currentPage: 1,
                kw: "",
                kyq:"",//o.kyqnow,
                boilerid:o.boilerid,
                isDeleted: 0,
                status: -1,
                sort: [
                  {
                    direct: "DESC",
                    field: "id"
                  }
                ]
              }).then(res => {
              let arr=getDateMore(res.data.data,1,["realTime",]);
              o.leftobj = arr.filter(x=>x.dncKyq_Name.substr(0,1)==o.kyqnow)[0];
              o.leftobj_b=arr.filter(x=>x.dncKyq_Name.substr(0,1)!=o.kyqnow)[0];
              resolve(res);
              
            });
        })
      }).then(res=>{
        return new Promise(resolve=>{
          getKyqpointList({
            totalCount: 0,
            pageSize: 20,
            currentPage: 1,
            kw: "",
            kyq:"",//o.kyqnow,
            isDeleted: 0,
            status: -1,
            boilerid:o.boilerid?o.boilerid:-1,
            tid:7,
            sort: [
              {
                direct: "DESC",
                field: "id"
              }
            ]
          }).then(res => {
            let arr= res.data.data;
            o.zsclip=eval("("+ arr.filter(x=>x.dncKyq_Name.substr(0,1)==o.kyqnow)[0].pval+")") ;
            o.zsclip_b=eval("("+ arr.filter(x=>x.dncKyq_Name.substr(0,1)!=o.kyqnow)[0].pval+")") ;
            o.calzx();
            resolve(res);
          });
        })  
      }).then(res=>{
        let f1=[];
        let f2=[];
        getKyqmadeList({
              totalCount: 0,
              pageSize: 20,
              currentPage: 1,
              // kw: "轴承",
              isDeleted: 0,
              status: -1,
              boilerid: o.boilerid,
              kyq:"",//o.kyqnow,
              sort: [
                {
                  direct: "DESC",
                  field: "id"
                }
              ]
            }).then(res => {
              let t=getDateMore(res.data.data,-1,["changedate",]);
              o.mades=t.filter(x=>x.dncKyq_Name.substr(0,1)==o.kyqnow);
              o.mades_b=t.filter(x=>x.dncKyq_Name.substr(0,1)!=o.kyqnow);
              o.loadjx();
              t.map(x=>{
                if(x.k_Name_kw=="支承轴承润滑油"){
                  let life_Val=x.life_Val;
                  let date=x.changedate;
                  date = date.substring(0,19);    
                  date = date.replace(/-/g,'/'); 
                  var timestamp = new Date(date).getTime();
                  var timestamp2 = new Date().getTime();
                  var hours=parseInt((timestamp2-timestamp)/(60*60*1000));
                  f1=[];
                  if(hours>=life_Val*24){
                    f1.push(0);f1.push(100);
                  }else{
                    let yy=parseInt(hours/(life_Val*24) * 100);
                    f1.push(100-yy);f1.push(yy);
                  }
                }
                if(x.k_Name_kw=="导向轴承润滑油"){
                  let life_Val=x.life_Val;
                  let date=x.changedate;
                  date = date.substring(0,19);    
                  date = date.replace(/-/g,'/'); 
                  var timestamp = new Date(date).getTime();
                  var timestamp2 = new Date().getTime();
                  var hours=parseInt((timestamp2-timestamp)/(60*60*1000));

                  // console.log(hours);console.log(life_Val*24);
                  f2=[];
                  if(hours>=life_Val*24){
                    f2.push(0);f2.push(100);
                  }else{
                    let yy=parseInt(hours/(life_Val*24) * 100);
                    f2.push(100-yy);f2.push(yy);
                  }
                }
              });
              o.bi1=f1[0];o.bi2=f2[0];
              let f=[];f.push(f1);f.push(f2);
              // console.log(JSON.stringify(f));
              o.loadcm(f);
              o.loadjx();
              o.loadcj();
              o.loadnum();
              o.loadhball();
            });
      })
    },
    loadcj(){
      let o=this;
      //   cjtop:50,cjheight:250,

      if(!o.cf || o.cf==null||!o.leftobj.zczc_Oil_Temp_Val){
      }else{
        o.lsqa.th = o.leftobj.gas_Temp_In_Val - o.cf.cjqY_A ;
        o.lsqa.td = (o.leftobj.gas_Temp_In_Val+o.leftobj.gas_Temp_Out_Val) * o.cf.cjqY_K /2;
        o.lsqa.tc = o.leftobj.gas_Temp_Out_Val - o.cf.cjqY_B ;

        o.lsqa.t1 = o.cf.cjqY_Up ;
        o.lsqa.t2 = o.cf.cjqY_Down ;

        //下框
        if(o.lsqa.td>o.cf.cjqY_Up){
          let ge=o.lsqa.td - o.lsqa.tc;
          let s=o.lsqa.td - o.cf.cjqY_Up;
          let x=o.lsqa.td - o.cf.cjqY_Down;

          o.cjtop=250 + parseInt(250*s/ge);
          o.cjheight=250 + parseInt(250*x/ge) - o.cjtop;
          o.cjworn=0;
        }
        //上框
        else if(o.lsqa.td<o.cf.cjqY_Down){
          let ge=o.lsqa.th - o.lsqa.td;
          let s=o.lsqa.th - o.cf.cjqY_Up;
          let x=o.lsqa.th - o.cf.cjqY_Down;

          o.cjtop=parseInt(250*s/ge);
          o.cjheight=parseInt(250*x/ge) - o.cjtop;
          o.cjworn=1;
        }
        else{
          let ge1=o.lsqa.th - o.lsqa.td;
          let ge2=o.lsqa.td - o.lsqa.tc;
          let s=o.lsqa.th - o.cf.cjqY_Up;
          let x=o.lsqa.td - o.cf.cjqY_Down;

          o.cjtop=parseInt(250*s/ge1);
          o.cjheight=(250-o.cjtop)+parseInt(250*x/ge2);
          o.cjworn=1;
        }
      }
    },
    loadcm(x){
// console.log(JSON.stringify(x));
      let cans = document.querySelectorAll(".can1");// document.getElementById("can1");
      for (let index = 0; index < cans.length; index++) {
        let can1 = cans[index];
        let ctx = can1.getContext("2d");
        let nums = x[index];
        let colors = ["#007EFE", "#ffffff"];
        let start = 0;
        let end = 0;
        ctx.translate(0,0);
        function pieChart(){
          for (let i = 0; i < nums.length; i ++){
            ctx.beginPath();
            ctx.moveTo(25,25);
            end += nums[i]/50*Math.PI;//终止角度
            ctx.strokeStyle = "white";
            ctx.fillStyle = colors[i];
            ctx.arc(25,25,25,start,end);
            ctx.fill();
            ctx.closePath();
            ctx.stroke();
            start += nums[i]/50*Math.PI;//起始角度
          }
        }
        // ctx.rotate(-Math.PI/6);//旋转一定角度更加自然
        pieChart();
      }
      
    },
    loadnum(){
      let o=this;
      let l1=0,l2=0,l3=0;
      if(o.dl=='超高'||o.dl=='偏高'){
        l1++;
      }
      if(o.ywzc=='超高'||o.ywzc=='偏高'){
        l1++;
      }
      if(o.ywdx=='超高'||o.ywdx=='偏高'){
        l1++;
      }
      if(o.yczc=='超高'){
        l1++;
      }
      if(o.ycdx=='超高'){
        l1++;
      }
      if(o.kqxl=='偏低'){
        l1++;
      }
      if(o.yqxl=='偏低'){
        l1++;
      }
      if(o.jsx=='偏高'){
        l1++;
      }
      if(o.zs<0.2){
        l1++;
      }

      if(o.leftobjfast.liftingDeviceS1==0){
        l2++;
      }
      if(o.leftobjfast.liftingDeviceS2==0){
        l2++;
      }
      if(o.leftobjfast.liftingDeviceS3==0){
        l2++;
      }

      if(o.yqzl=='偏高'){
        l3++;
      }
      if(o.reya=='偏高'||o.reya=='偏低'){
        l3++;
      }
      if(o.lengya=='偏高'||o.lengya=='偏低'){
        l3++;
      }
      if(o.gaoya=='偏高'||o.gaoya=='偏低'){
        l3++;
      }
      if(o.rewen=='偏低'){
        l3++;
      }
      if(o.lengwen=='偏低'){
        l3++;
      }
      o.cnum1=l1;
      o.cnum2=l2;
      o.cnum3=l3;
    },
    loadjx(){
      let o=this;

      let t10="";

      let t1="";
      // console.log(o.jsx);
      if (o.jsx=='偏高') {
        t1+="<li> 减速箱温度偏高.</li>";
        t10+="<li> 检查减速箱油管路是否堵塞；输入轴同轴度是否满足要求，轴承是否损坏；是否有泄漏现象；</li>";
      }
      if (o.dl=='超高') {
        t1+="<li> 电流超高.</li>";
        t10+="<li> 请检查空预器运行中是否有卡塞；检查减速箱齿轮与销轴间隙；</li>";
      }else if (o.dl=='偏高') {
        t1+="<li> 电流偏大.</li>";
        t10+="<li> 请检查空预器运行中是否有卡塞；检查减速箱齿轮与销轴间隙；</li>";
      }
      if(t1!=""){
        t1="<ol>"+t1+"</ol>";
      }
      o.ttt1=t1;

      let t2="";
      if (o.leftobjfast.lcsRunMode==0) {
        if (o.leftobjfast.liftingDeviceS1==0) {
          t2+="<li> A1 提升装置状态异常.</li>";
        }
        if (o.leftobjfast.liftingDeviceS2==0) {
          t2+="<li> A2 提升装置状态异常.</li>";
        }
        if (o.leftobjfast.liftingDeviceS3==0) {
          t2+="<li> A3 提升装置状态异常.</li>";
        }
        if (o.leftobjfast.liftingDeviceS1==0||o.leftobjfast.liftingDeviceS2==0||o.leftobjfast.liftingDeviceS3==0) {
          t10+="<li> 提升装置故障，请检查该处扇形板是否有卡塞；</li>";
        }
      }else{
        t2+="<li> 传感器故障，已进入温度控制模式.</li>";
        t10+="<li> 传感器损坏，请更换传感器；</li>";
      }

      if(t2!=""){
        t2="<ol>"+t2+"</ol>";
      }
      o.ttt2=t2;


      let t3="";
      if (o.yqzl=='偏高') {
        t3+="<li> 烟气侧阻力偏高.</li>";
        t10+="<li> 建议采用高压水冲洗或停炉进行冲洗</li>";
      }
      if (o.kqxl=='偏低') {
        t3+="<li> 空气侧效率偏低.</li>";
        t10+="<li> 建议检查和更换传热元件</li>";
      }

      let b1=0;
      o.mades.map(x=>{
          if(x.k_Name_kw.indexOf("元件")!=-1){
            let life_Val=x.life_Val;
            let date=x.changedate;
            date = date.substring(0,19);    
            date = date.replace(/-/g,'/'); 
            var timestamp = new Date(date).getTime();
            var timestamp2 = new Date().getTime();
            var hours=parseInt((timestamp2-timestamp)/(60*60*1000));
            if(hours>life_Val*(100-o.cf.life_Low)/100){
              t3+="<li> "+x.k_Name_kw+" 使用寿命低于"+o.cf.life_Low+"%.</li>";
              b1=1;
            }
          }
        });

      if(b1==1){
        t10+="<li> 建议检查和更换传热元件</li>";
      }
      if(t3!=""){
        t3="<ol>"+t3+"</ol>";
      }
      o.ttt3=t3;


      let t5="";
      // console.log(o.bi1);
      // if (o.bi1<o.cf.life_Low) {
      //   t5+="<li> 使用寿命低于"+o.cf.life_Low+"%.</li>";
      //   t10+="<li> 建议更换支承轴承</li>";
      // }
      o.mades.map(x=>{
          if(x.k_Name_kw=="支承轴承"){
            let life_Val=x.life_Val;
            let date=x.changedate;
            date = date.substring(0,19);    
            date = date.replace(/-/g,'/'); 
            var timestamp = new Date(date).getTime();
            var timestamp2 = new Date().getTime();
            var hours=parseInt((timestamp2-timestamp)/(60*60*1000));
            if(hours>life_Val*(100-o.cf.life_Low)/100){
              t5+="<li> "+x.k_Name_kw+" 使用寿命低于"+o.cf.life_Low+"%.</li>";
              t10+="<li> 建议更换支承轴承</li>";
            }
          }
        });


      let zzi1=0,lw1=0;
      if(o.ywzc=='超高'){
        t5+="<li> 油站温度超高.</li>";
        zzi1=1;lw1=1;
      }else if(o.ywzc=='偏高'){
        t5+="<li> 油站温度偏高.</li>";
        zzi1=1;lw1=1;
      }

      if(o.yczc=='超高'){
        t5+="<li> 油站压差超高.</li>";
        // 
        zzi1=1;lw1=1;
      }

      if(zzi1==1){
        t10+="<li> 检查支承轴承润滑油是否有杂质</li>";
      }

      o.mades.map(x=>{
          if(x.k_Name_kw.indexOf("支承轴承润滑油")!=-1){
            let life_Val=x.life_Val;
            let date=x.changedate;
            date = date.substring(0,19);    
            date = date.replace(/-/g,'/'); 
            var timestamp = new Date(date).getTime();
            var timestamp2 = new Date().getTime();
            var hours=parseInt((timestamp2-timestamp)/(60*60*1000));
            if(hours>life_Val*(100-o.cf.life_Low)/100){
              t5+="<li> "+x.k_Name_kw+" 润滑油使用寿命低于"+o.cf.life_Low+"%.</li>";
            }
            if(hours>24*30*6){
              lw1=1;
            }
          }
        });

      if(lw1==1){
        t10+="<li> 更换支承轴承润滑油并清洗管路和滤网</li>";
      }


      if(t5!=""){
        t5="<ol>"+t5+"</ol>";
      }
      o.ttt5=t5;

      let t6="";
      // console.log(o.bi2+"--"+o.cf.life_Low);
      o.mades.map(x=>{
          if(x.k_Name_kw=="导向轴承"){
            let life_Val=x.life_Val;
            let date=x.changedate;
            date = date.substring(0,19);    
            date = date.replace(/-/g,'/'); 
            var timestamp = new Date(date).getTime();
            var timestamp2 = new Date().getTime();
            var hours=parseInt((timestamp2-timestamp)/(60*60*1000));
            if(hours>life_Val*(100-o.cf.life_Low)/100){
              t6+="<li> "+x.k_Name_kw+" 使用寿命低于"+o.cf.life_Low+"%.</li>";
              t10+="<li> 建议更换导向轴承</li>";
            }
            if(hours>24*life_Val){
              lw1=1;
            }
          }
      });

      let zzi2=0,lw2=0;
      if(o.ywdx=='超高'){
        t6+="<li> 油站温度超高.</li>";
        zzi2=1;lw2=1;
      }else if(o.ywdx=='偏高'){
        t6+="<li> 油站温度偏高.</li>";
        zzi2=1;lw2=1;
      }

      if(o.ycdx=='超高'){
        t6+="<li> 油站压差超高.</li>";
        t10+="<li> 更换导向轴承润滑油并清洗管路和滤网</li>";
        zzi2=1;lw2=1;
      }
      if(zzi2==1){
        t10+="<li> 检查导向轴承润滑油是否有杂质</li>";
      }

      
      o.mades.map(x=>{
          if(x.k_Name_kw.indexOf("导向轴承润滑油")!=-1){
            let life_Val=x.life_Val;
            let date=x.changedate;
            date = date.substring(0,19);    
            date = date.replace(/-/g,'/'); 
            var timestamp = new Date(date).getTime();
            var timestamp2 = new Date().getTime();
            var hours=parseInt((timestamp2-timestamp)/(60*60*1000));
            if(hours>life_Val*(100-o.cf.life_Low)/100){
              t6+="<li> "+x.k_Name_kw+" 润滑油使用寿命低于"+o.cf.life_Low+"%.</li>";
            }
            if(hours>24*life_Val){
              lw2=1;
            }
          }
        });


      if(lw2==1){
        t10+="<li> 更换导向轴承润滑油并清洗管路和滤网</li>";
      }


      if(t6!=""){
        t6="<ol>"+t6+"</ol>";
      }
      o.ttt6=t6;

      let t7="";
      if (o.zsindex!=-1) {
        t7+="<li> 转速探头"+o.zsindex+"偏离.</li>";
        t10+="<li> 更换测速探头</li>";
      }

      if(t7!=""){
        t7="<ol>"+t7+"</ol>";
      }
      o.ttt7=t7;

      let t8="";
      let m9=0;
      o.mades.map(x=>{
          if(x.k_Name_kw.indexOf("密封片")!=-1){
            let life_Val=x.life_Val;
            let date=x.changedate;
            date = date.substring(0,19);    
            date = date.replace(/-/g,'/'); 
            var timestamp = new Date(date).getTime();
            var timestamp2 = new Date().getTime();
            var hours=parseInt((timestamp2-timestamp)/(60*60*1000));
            if(hours>life_Val*(100-o.cf.life_Low)/100){
              t8+="<li> "+x.k_Name_kw+" 使用寿命低于"+o.cf.life_Low+"%.</li>";
              m9=1;
            }
          }
        });
      if(m9==1){
        t10+="<li> 检查和更换密封片</li>";
      }
      if(t8!=""){
        t8="<ol>"+t8+"</ol>";
      }
      o.ttt8=t8;


      if(t10!=""){
        t10="检修建议:<br/><ol style='padding-left: 20px;'>"+t10+"</ol>";
      }
      o.ttt10=t10;
    },
    loadhball(){
      let o=this;
      let fast=o.leftobjfast_b;
      let f=o.leftobj_b;
      if(fast.kyq_Run_Dl_Val>o.cf.eddl_Val*0.6){
        o.kyqbj=true;
        return;
      }
      if(f.zczc_Oil_Temp_Val>o.cf.zczc_Oiltemp_Warn_Val){
        o.kyqbj=true;
        return;
      }
      if(f.dxzc_Oil_Temp_Val>o.cf.dxzc_Oiltemp_Warn_Val){
        o.kyqbj=true;
        return;
      }
      if(f.zczc_Oil_Dif_Val>o.cf.oil_Press_Dif_Val){
        o.kyqbj=true;
        return;
      }
      if(f.dxzc_Oil_Dif_Val>o.cf.oil_Press_Dif_Val){
        o.kyqbj=true;
        return;
      }
      if(f.air_Radio_Val*100<o.cf.xl_Low){
        o.kyqbj=true;
        return;
      }
      if(f.gas_Radio_Val*100<o.cf.xl_Low){
        o.kyqbj=true;
        return;
      }
      // if(fast.wind_Out_Radio_Val>o.cf.lfl_High_Val){
      //   o.kyqbj=true;
      //   return;
      // }

      // if(fast.wind_Out_Radio_Val>o.cf.ifl_Design_Val*1.5){
      //   o.kyqbj=true;
      //   return;
      // }
      if(fast.res_Gas_Val >= o.cf.gasair_Res_Ini_Val*1.5 || fast.res_Gas_Val >   o.cf.gasair_Res_High_Val){
        o.kyqbj=true;
        return;
      }
      if(fast.chq_Press_Hot_Val>o.cf.hot_Chq_Press_High_Val||fast.chq_Press_Hot_Val<o.cf.hot_Chq_Press_Low_Val){
        o.kyqbj=true;
        return;
      }
      if(fast.chq_Press_Cold_Val>o.cf.cold_Chq_Press_High_Val||fast.chq_Press_Cold_Val<o.cf.cold_Chq_Press_Low_Val){
        o.kyqbj=true;
        return;
      }
      if(fast.chq_Temp_Hot_Val<o.cf.chq_Temp_Low_Val){
        o.kyqbj=true;
        return;
      }
      if(fast.chq_Temp_Cold_Val<o.cf.chq_Temp_Low_Val){
        o.kyqbj=true;
        return;
      }
      if(fast.gysb_Press_Val<o.cf.gysb_Press_Low_Val||fast.gysb_Press_Val>o.cf.gysb_Press_High_Val){
        o.kyqbj=true;
        return;
      }
      if(fast.reductionBoxTemperature-fast.environmentTemperature>o.cf.temperatureDifference){
        o.kyqbj=true;
        return;
      }
      if((f.gas_Temp_In_Val+f.gas_Temp_Out_Val) * o.cf.cjqY_K /2 <= o.cf.cjqY_Up){
        o.kyqbj=true;
        return;
      }
      if(fast.liftingDeviceS1==0||fast.liftingDeviceS2==0||fast.liftingDeviceS3==0){
        o.kyqbj=true;
        return;
      }
      let s=false;
      o.mades_b.map(x=>{
          if(x.k_Name_kw.indexOf("元件")!=-1){
            let life_Val=x.life_Val;
            let date=x.changedate;
            date = date.substring(0,19);    
            date = date.replace(/-/g,'/'); 
            var timestamp = new Date(date).getTime();
            var timestamp2 = new Date().getTime();
            var hours=parseInt((timestamp2-timestamp)/(60*60*1000));
            if(hours>life_Val*(100-o.cf.life_Low)/100){
              s=true;
            }
          }

          if(x.k_Name_kw.indexOf("密封片")!=-1){
            let life_Val=x.life_Val;
            let date=x.changedate;
            date = date.substring(0,19);    
            date = date.replace(/-/g,'/'); 
            var timestamp = new Date(date).getTime();
            var timestamp2 = new Date().getTime();
            var hours=parseInt((timestamp2-timestamp)/(60*60*1000));
            if(hours>life_Val*(100-o.cf.life_Low)/100){
              s=true;
            }
          }

          if(x.k_Name_kw=="支承轴承"){
            let life_Val=x.life_Val;
            let date=x.changedate;
            date = date.substring(0,19);    
            date = date.replace(/-/g,'/'); 
            var timestamp = new Date(date).getTime();
            var timestamp2 = new Date().getTime();
            var hours=parseInt((timestamp2-timestamp)/(60*60*1000));
            if(hours>life_Val*(100-o.cf.life_Low)/100){
              s=true;
            }
          }

          if(x.k_Name_kw.indexOf("支承轴承润滑油")!=-1){
            let life_Val=x.life_Val;
            let date=x.changedate;
            date = date.substring(0,19);    
            date = date.replace(/-/g,'/'); 
            var timestamp = new Date(date).getTime();
            var timestamp2 = new Date().getTime();
            var hours=parseInt((timestamp2-timestamp)/(60*60*1000));
            if(hours>life_Val*(100-o.cf.life_Low)/100){
              s=true;
            }
          }

          if(x.k_Name_kw=="导向轴承"){
            let life_Val=x.life_Val;
            let date=x.changedate;
            date = date.substring(0,19);    
            date = date.replace(/-/g,'/'); 
            var timestamp = new Date(date).getTime();
            var timestamp2 = new Date().getTime();
            var hours=parseInt((timestamp2-timestamp)/(60*60*1000));
            if(hours>life_Val*(100-o.cf.life_Low)/100){
              s=true;
            }
          }

          if(x.k_Name_kw.indexOf("导向轴承润滑油")!=-1){
            let life_Val=x.life_Val;
            let date=x.changedate;
            date = date.substring(0,19);    
            date = date.replace(/-/g,'/'); 
            var timestamp = new Date(date).getTime();
            var timestamp2 = new Date().getTime();
            var hours=parseInt((timestamp2-timestamp)/(60*60*1000));
            if(hours>life_Val*(100-o.cf.life_Low)/100){
              s=true;
            }
          }
        });
      if(!s){
        o.kyqbj=true;
        return;
      }

      if(o.zsclip_b[0]!=''){
        // console.log(o.zsclip[0]+"-"+o.zsclip[1]+"-"+o.zsclip[2]);
        let avg=(o.zsclip_b[0]+o.zsclip_b[1]+o.zsclip_b[2])/3;
        // console.log(avg);
        var arr = [Math.abs(avg-o.zsclip_b[0]),Math.abs(avg-o.zsclip_b[1]),Math.abs(avg-o.zsclip_b[2])];
        var max = arr.reduce(function(a , b){
        return b > a ? b : a;
        });
        // console.log(max);
        let i=-1;
        if(arr[0]==max)i=0;
        if(arr[1]==max)i=1;
        if(arr[2]==max)i=2;

        let zsindex=0,zs=0;
        if(o.zsclip_b[i]>=o.zsclip_b[0]&&o.zsclip_b[i]>=o.zsclip_b[1]&&o.zsclip_b[i]>=o.zsclip_b[2]){
          if(o.zsclip_b[i]>1.1*o.zsclip_b[0]||o.zsclip_b[i]>1.1*o.zsclip_b[1]||o.zsclip_b[i]>1.1*o.zsclip_b[2]){
            zsindex=i+1;
          }else{
            zsindex=-1;
          }
        }else{
          if(1.1*o.zsclip_b[i]<o.zsclip_b[0]||1.1*o.zsclip_b[i]<o.zsclip_b[1]||1.1*o.zsclip_b[i]<o.zsclip_b[2]){
            zsindex=i+1;
          }else{
            zsindex=-1;
          }
        }

        if(zsindex==-1){
          zs=avg;
        }else if(zsindex==1){
          zs=(o.zsclip_b[1]+o.zsclip_b[2])/2;
        }else if(zsindex==2){
          zs=(o.zsclip_b[0]+o.zsclip_b[2])/2;
        }else if(o.zsindex==3){
          zs=(o.zsclip_b[0]+o.zsclip_b[1])/2;
        }
        if(zs<0.2){
          o.kyqbj=true;
          return;
        }
      }
      o.kyqbj=false;
    }
  },
  mounted() {
    let o = this;


    o.h2=window.screen.height-90;
    o.w2=window.screen.width-90;

    o.mini2d=(o.w2-10)/4/6-(o.w2-10)/4/18;
    o.mg1=(o.w2-10)/4/22;
    o.mg2=-(o.w2-10)/4/6/3;
    //初始化机组
    o.initboiler();
    o.loadresult();
    //初始化3d
    o.init();
    //动画
    o.animate();
    

    o.timer2=setInterval(() => {

      if(o.boilerid==-1){
        return;
      }
      this.h2=window.screen.height-90;
        this.w2=window.screen.width-90;
        this.mini2d=(this.w2-10)/4/6-(this.w2-10)/4/18;
        this.mg1=(this.w2-10)/4/22;
        this.mg2=-(this.w2-10)/4/6/3;
        //初始化3d

        this.loadresult();
        this.init2();

    }, 5000);
  },

  beforeDestroy() {
    clearInterval(this.timer2);
  }
};
</script>

<!--  加上私有化属性scoped后 threejs找不到，所以不能加 -->
<style>

.znkyq .labeles6 {
  color: #FFF;
  font-family: sans-serif;
  font-size: 16px;
  border: 1px solid #fff;
  padding-left: 3px;
  padding-right: 3px;
  padding-top: 3px;
  padding-bottom: 3px;

  background: rgba(21, 29, 9, 0.6);
}

.jcgk .l{
        position: relative;
        display: block;
        /* border:1px solid red; */
        width: 700px;
        height: 500px;
        background-color: #fff;
        margin-left: 130px;
  }
  .jcgk .l .u{
    position:absolute;
    left: 0px;
    top: 0px;
    height: 250px;
    padding-top: 75px;
    /* padding-left: 30px;; */
    width: 700px;
    background-color: #ed7d31;
    z-index: 12;
    border-bottom:2px solid #fff;
    font-size: 19px;
    line-height: 25px;
  }
  .jcgk .l .re{
    position:absolute;
    left: 0px;
    top: 0px;
    height: 250px;
    padding-top: 75px;
    padding-left: 30px;
    width: 700px;
    z-index: 12;
    border-bottom:2px solid #fff;
    font-size: 19px;
    line-height: 25px;
  }
  .jcgk .l .re1{
    position:absolute;
    left: 0px;
    top: 250px;
    height: 250px;
    padding-top: 75px;
    padding-left: 30px;
    width: 700px;
    z-index: 12;
    border-bottom:2px solid #fff;
    font-size: 19px;
    line-height: 25px;
  }
  .jcgk .l .x{
    position:absolute;
    left: 0px;
    top: 248px;
    height: 0px;
    width: 700px;
    border-top:2px dashed #fff;
    /* background-color: #fff; */
    z-index: 23;
  }
  .jcgk .l .d{
    padding-top: 75px;
    font-size: 19px;
    line-height: 25px;
    position:absolute;
    left: 0px;
    top: 250px;
    height: 250px;
    width: 700px;
    background-color: #5b9bd5;
    z-index: 12;
  }
  .jcgk .l .z{
    position:absolute;
    left: 0px;
    top: 120px;
    height: 50px;
    width: 700px;
    background-color: #7030a0;
    z-index: 22;
    line-height: 50px;
    font-size: 38px;
    color: #FFF;
    font-weight: bold;
    text-align: center;
    font-family: '楷体';
  }
  .jcgk .l .zi{
    position:absolute;
    margin-bottom: -15px;
    left: -130px;
    bottom: 0px;
    height: 30px;
    line-height: 30px;
    font-size: 19px;
    width: 30px;
    z-index: 26;
  }
  .jcgk .l .zi1{
    position:absolute;
    color: blueviolet;
    margin-bottom: -15px;
    left: -60px;
    bottom: 0px;
    height: 30px;
    line-height: 30px;
    font-size: 16px;
    width: 30px;
    z-index: 26;
  }
   @keyframes Glow {
        from {
            box-shadow: 0 0 10px #fff,
                        0 0 20px #a60000,
                        0 0 30px #a60000;
        }
        to {
            box-shadow: 0 0 1px #fff,
                        0 0 10px #fff,
                        0 0 25px #ec0505;
        }
    }

   .active{
              -webkit-animation: Glow 0.3s ease infinite alternate;
              animation: Glow 0.3s ease infinite alternate;
    } 

    .ivu-badge-count {
        top: -5px;
        height: 15px;
        border-radius: 10px;
        line-height: 15px;
        padding: 0px;
        min-width: 16px;
    }
</style>